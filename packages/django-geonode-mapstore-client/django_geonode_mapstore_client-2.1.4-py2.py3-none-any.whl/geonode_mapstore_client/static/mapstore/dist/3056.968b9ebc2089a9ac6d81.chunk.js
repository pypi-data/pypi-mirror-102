(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[3056],{59551:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(72500),a=r.n(n),o=r(91175),c=r.n(o),i=r(10928),u=r.n(i),l=r(27418),s=r.n(l),f=r(75875),d=r.n(f),v=r(37275),m=r(86267),g=function(e){var t=a().parse(e,!0);return a().format(s()({},t,{search:null},{query:s()({service:"CSW",version:"2.0.2"},t.query,{request:void 0})}))},p={parseUrl:g,getRecordById:function(e){return new Promise((function(t){Promise.all([r.e(9942),r.e(6372)]).then(function(){t(d().get(e).then((function(e){if(e){var t=r(66372).unmarshaller.unmarshalString(e.data);if(t&&t.name&&"GetRecordByIdResponse"===t.name.localPart&&t.value&&t.value.abstractRecord){var n=t.value.abstractRecord[0].value.dcElement;if(n){for(var a={references:[]},o=0;o<n.length;o++){var c=n[o],i=c.name.localPart,u={};u="references"===i&&c.value?{value:c.value.content&&(0,v.$F)(c.value.content[0])||c.value.content||c.value,scheme:c.value.scheme}:c.value.content&&c.value.content[0]||c.value.content||c.value,a[i]&&Array.isArray(a[i])?a[i].push(u):a[i]?a[i]=[a[i],u]:a[i]=u}return{dc:a}}}else if(t&&t.name&&"ExceptionReport"===t.name.localPart)return{error:t.value.exception&&t.value.exception.length&&t.value.exception[0].exceptionText||"GenericError"};return null}return null})))}.bind(null,r)).catch(r.oe)}))},getRecords:function(e,t,n,a){return new Promise((function(o){Promise.all([r.e(9942),r.e(1269)]).then(function(){var i=r(66372),l=i.CSW,s=i.marshaller,f=i.unmarshaller,p=s.marshalString({name:"csw:GetRecords",value:l.getRecords(t,n,a)});o(d().post(g(e),p,{headers:{"Content-Type":"application/xml"}}).then((function(e){if(e){var t=f.unmarshalString(e.data);if(t&&t.name&&"GetRecordsResponse"===t.name.localPart&&t.value&&t.value.searchResults){var r=t.value,n=r.searchResults.abstractRecord||r.searchResults.any,a={numberOfRecordsMatched:r.searchResults.numberOfRecordsMatched,numberOfRecordsReturned:r.searchResults.numberOfRecordsReturned,nextRecord:r.searchResults.nextRecord},o=[];if(n)for(var i=0;i<n.length;i++){var l=n[i].value,s={dateStamp:l.dateStamp&&l.dateStamp.date,fileIdentifier:l.fileIdentifier&&l.fileIdentifier.characterString&&l.fileIdentifier.characterString.value,identificationInfo:l.abstractMDIdentification&&l.abstractMDIdentification.value};if(l.boundingBox){var d,g=void 0,p=void 0;if((d=Array.isArray(l.boundingBox)?c()(l.boundingBox):l.boundingBox)&&d.value){var h,S,b,w,R=null!==(h=null===(S=d.value)||void 0===S?void 0:S.crs)&&void 0!==h?h:"",y=null===(b=R.match(/[\w-]*:[\w-]*:[\w-]*:[\w-]*:[\w-]*:[^:]*:(([\w-]+\s[\w-]+)|[\w-]*)/))||void 0===b?void 0:b[0],P=(0,m.makeNumericEPSG)(null===(w=R.match(/EPSG:[0-9]+/))||void 0===w?void 0:w[0]),x=d.value.lowerCorner,O=d.value.upperCorner,E=P||(0,m.extractCrsFromURN)(y)||u()(R.split(":"));if(E){if("EPSG:"===E.slice(0,5)){if(!(p=(0,m.makeNumericEPSG)(E)))throw new Error('No suitable EPSG numeric conversion found for "'.concat(E,'"'))}else if(!(p=(0,m.makeNumericEPSG)("EPSG:".concat(E))))throw new Error('No suitable EPSG numeric conversion found for "'.concat(E,'"'))}else p="EPSG:4326";"EPSG:4326"===p&&"CRS84"!==E&&"OGC:CRS84"!==E&&(x=[x[1],x[0]],O=[O[1],O[0]]),g=(0,m.makeBboxFromOWS)(x,O)}s.boundingBox={extent:g,crs:p}}var C=l.dcElement;if(C){for(var G={references:[]},k=0;k<C.length;k++){var T=C[k],I=T.name.localPart,j={};j="references"===I&&T.value?{value:T.value.content&&(0,v.$F)(T.value.content[0])||T.value.content||T.value,scheme:T.value.scheme}:T.value.content&&T.value.content[0]||T.value.content||T.value,G[I]&&Array.isArray(G[I])?G[I].push(j):G[I]?G[I]=[G[I],j]:G[I]=j}s.dc=G}o.push(s)}return a.records=o,a}if(t&&t.name&&"ExceptionReport"===t.name.localPart)return{error:t.value.exception&&t.value.exception.length&&t.value.exception[0].exceptionText||"GenericError"}}return null})))}.bind(null,r)).catch(r.oe)}))},textSearch:function(e,t,n,a){return new Promise((function(o){Promise.all([r.e(9942),r.e(1269)]).then(function(){var c=r(84454).Filter,i=null;if(a){var u=c.propertyIsLike("csw:AnyText","%"+a+"%");i=c.filter(u)}o(p.getRecords(e,t,n,i))}.bind(null,r)).catch(r.oe)}))},workspaceSearch:function(e,t,n,a,o){return new Promise((function(c){Promise.all([r.e(9942),r.e(1269)]).then(function(){var i=r(84454).Filter,u=o||"%",l=a&&"%"+a+"%"||"%",s=i.propertyIsLike("identifier",u+":"+l),f=i.filter(s);c(p.getRecords(e,t,n,f))}.bind(null,r)).catch(r.oe)}))},reset:function(){}};const h=p},3475:(e,t,r)=>{"use strict";r.d(t,{Z:()=>w});var n=r(75875),a=r.n(n),o=r(37275),c=r(72500),i=r.n(c),u=r(27418),l=r.n(u),s=r(5055),f=r.n(s),d=r(84596),v=r.n(d),m=r(86267),g=r(7294),p={},h=function(e){var t=i().parse(e,!0);return i().format(l()({},t,{search:null},{query:l()({SERVICE:"WMTS",VERSION:"1.0.0",REQUEST:"GetCapabilities"},t.query)}))},S=function(e,t,r,n,a){for(var o=e.Capabilities.Contents,c=(0,g.G6)(e),i=(0,g.s5)(e),u=o.TileMatrixSet&&v()(o.TileMatrixSet)||[],s=[],f=u.length,d=0;d<f;d++)s.push((0,m.getEPSGCode)(u[d]["ows:SupportedCRS"]));var p=o.Layer,h=v()(p).filter((function(e){return!n||-1!==e["ows:Identifier"].toLowerCase().indexOf(n.toLowerCase())||e["ows:Title"]&&-1!==e["ows:Title"].toLowerCase().indexOf(n.toLowerCase())}));return{numberOfRecordsMatched:h.length,numberOfRecordsReturned:Math.min(r,h.length),nextRecord:t+Math.min(r,h.length)+1,records:h.filter((function(e,n){return n>=t-1&&n<t-1+r})).map((function(e){return l()({},e,{SRS:s,TileMatrixSet:u,queryable:!!(0,g.b4)(c,"GetFeatureInfo","KVP"),requestEncoding:i,style:(0,g.EN)(e),format:(0,g.JY)(e),GetTileURL:(0,g.b4)(c,"GetTile",i),capabilitiesURL:a})}))}},b={parseUrl:h,getRecords:function(e,t,r,n){var c=p[e];return c&&(new Date).getTime()<c.timestamp+1e3*((0,o.u8)("cacheExpire")||60)?new Promise((function(a){a(S(c.data,t,r,n,e))})):a().get(h(e)).then((function(a){var o;return f().parseString(a.data,{explicitArray:!1},(function(e,t){o=t})),p[e]={timestamp:(new Date).getTime(),data:o},S(o,t,r,n,e)}))},getCapabilities:function(e){var t=p[e];return t&&(new Date).getTime()<t.timestamp+1e3*((0,o.u8)("cacheExpire")||60)?new Promise((function(e){e(t.data)})):a().get(h(e)).then((function(t){var r;return f().parseString(t.data,{explicitArray:!1},(function(e,t){r=t})),p[e]={timestamp:(new Date).getTime(),data:r},r}))},textSearch:function(e,t,r,n){return b.getRecords(e,t,r,n)},reset:function(){Object.keys(p).forEach((function(e){delete p[e]}))}};const w=b},32354:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(27361),a=r.n(n),o=r(37275),c=function(e,t,r,n){var c=a()(o.ZP.getDefaults(),"initialState.defaultState.catalog.default.staticServices.default_map_backgrounds.backgrounds").filter((function(e){return!n||e.title.indexOf(n)>-1})),i=c.filter((function(e,n){return n>=t-1&&n<r+t-1}));return new Promise((function(e){return e({numberOfRecordsMatched:c.length,numberOfRecordsReturned:i.length,records:i,service:{Name:"Background Provider"}})}))};const i={getRecords:c,reset:function(){},textSearch:function(e,t,r,n){return c(0,t,r,n)}}},88113:(e,t,r)=>{"use strict";r.d(t,{b6:()=>v,PG:()=>m,_x:()=>g,Mm:()=>p,dP:()=>h,SX:()=>S,ZL:()=>b,_S:()=>w,iH:()=>R,R7:()=>y,Q7:()=>P,n7:()=>x,bA:()=>O,hm:()=>E,E2:()=>C,Cb:()=>G,eK:()=>k,Im:()=>T,e8:()=>I,$t:()=>j,kS:()=>M,y:()=>L,l2:()=>B,HN:()=>A,BM:()=>D,am:()=>F,LV:()=>N,CK:()=>_});var n=r(22222),a=r(27361),o=r.n(a),c=r(78718),i=r.n(c),u=r(827),l=r(76712);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v=function(e){return o()(e,"catalog.services")},m=(0,n.P1)((function(e){return o()(e,"catalog.default.staticServices")}),v,(function(e,t){return f(f({},t),i()(e,"default_map_backgrounds"))})),g=function(e){return o()(e,"catalog.default.tileSizes",[256,512])},p=function(e){return o()(e,"controls.metadataexplorer.group")},h=function(e){return o()(e,"catalog.saving")},S=function(e){return o()(e,"catalog.result")},b=function(e){return o()(e,"catalog.openCatalogServiceList")},w=function(e){return o()(e,"catalog.newService")},R=function(e){return o()(e,"catalog.newService.type","csw")},y=function(e){return o()(e,'catalog.services["'.concat(o()(e,"catalog.selectedService"),'"]'))},P=function(e){return o()(e,'catalog.services["'.concat(o()(e,"catalog.selectedService"),'"].type'),function(e){return o()(e,'catalog.default.staticServices["'.concat(o()(e,"catalog.selectedService"),'"].type'),"csw")}(e))},x=function(e){return o()(e,'catalog.services["'.concat(o()(e,"catalog.selectedService"),'"].layerOptions'),{})},O=function(e){return o()(e,"catalog.searchOptions")},E=function(e){return o()(e,"catalog.loadingError")},C=function(e){return o()(e,"catalog.loading",!1)},G=function(e){return o()(e,"catalog.selectedService")},k=function(e){return o()(e,"catalog.mode","view")},T=function(e){return o()(e,"catalog.layerError")},I=function(e){return o()(e,"catalog.searchOptions.text","")},j=function(e){return"metadataexplorer"===o()(e,"controls.toolbar.active")||o()(e,"controls.metadataexplorer.enabled")},M=function(e){return(o()(e,"localConfig.authenticationRules")||[]).filter((function(e){return"authkey"===e.method})).map((function(e){return e.authkeyParamName}))||[]},L=function(e){return o()(e,"catalog.pageSize",4)},B=function(e){return o()(e,"catalog.delayAutoSearch",1e3)},A=(0,n.zB)({projection:u.uy}),D=function(e){return o()(e,"catalog.formatsLoading",!1)},F=function(e){return o()(e,"catalog.newService.supportedFormats.imageFormats",l.QQ)},N=function(e){return o()(e,"catalog.newService.supportedFormats.infoFormats",(0,l.B8)())},_=function(e){return o()(e,"catalog.newService.formatUrlUsed","")}}}]);