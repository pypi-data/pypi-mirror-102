(self.webpackChunk=self.webpackChunk||[]).push([["AcceptOrganizationInvite"],{"./app/views/acceptOrganizationInvite.tsx":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>T});var r=n("../../../../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),i=n("../../../../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),s=n("../../../../node_modules/@babel/runtime/helpers/esm/createClass.js"),o=n("../../../../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),a=n("../../../../node_modules/@babel/runtime/helpers/esm/inherits.js"),l=n("../../../../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),u=n("../../../../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),c=n("../../../../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),d=n("../../../../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),p=n("../../../../node_modules/@babel/runtime/regenerator/index.js"),m=n.n(p),g=n("../../../../node_modules/react/index.js"),f=n("../../../../node_modules/react-router/es/index.js"),h=n("../../../../node_modules/@sentry/utils/esm/object.js"),y=n("./app/actionCreators/account.tsx"),b=n("./app/components/alert.tsx"),Z=n("./app/components/button.tsx"),v=n("./app/components/links/externalLink.tsx"),x=n("./app/components/links/link.tsx"),w=n("./app/components/narrowLayout.tsx"),S=n("./app/locale.tsx"),k=n("./app/stores/configStore.tsx"),j=n("./app/styles/space.tsx"),_=n("./app/views/asyncView.tsx"),P=n("./app/views/settings/components/settingsPageHeader.tsx"),C=n("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");var A=function(e){(0,a.Z)(p,e);var t,n,d=(t=p,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,u.Z)(t);if(n){var i=(0,u.Z)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,l.Z)(this,e)});function p(){var e;(0,i.Z)(this,p);for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return e=d.call.apply(d,[this].concat(n)),(0,c.Z)((0,o.Z)(e),"handleLogout",function(){var t=(0,r.Z)(m().mark((function t(n){return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,(0,y.kS)(e.api);case 3:window.location.replace(e.makeNextUrl("/auth/login/"));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),(0,c.Z)((0,o.Z)(e),"handleAcceptInvite",(0,r.Z)(m().mark((function t(){var n,r,i;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.params,r=n.memberId,i=n.token,e.setState({accepting:!0}),t.prev=2,t.next=5,e.api.requestPromise("/accept-invite/".concat(r,"/").concat(i,"/"),{method:"POST"});case 5:f.browserHistory.replace("/".concat(e.state.inviteDetails.orgSlug,"/")),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),e.setState({acceptError:!0});case 11:e.setState({accepting:!1});case 12:case"end":return t.stop()}}),t,null,[[2,8]])})))),e}return(0,s.Z)(p,[{key:"getEndpoints",value:function(){var e=this.props.params,t=e.memberId,n=e.token;return[["inviteDetails","/accept-invite/".concat(t,"/").concat(n,"/")]]}},{key:"getTitle",value:function(){return(0,S.t)("Accept Organization Invite")}},{key:"makeNextUrl",value:function(e){return"".concat(e,"?").concat((0,h._j)({next:window.location.pathname}))}},{key:"existingMemberAlert",get:function(){var e=k.Z.get("user");return(0,C.tZ)(b.Z,{type:"warning","data-test-id":"existing-member"},(0,S._N)("Your account ([email]) is already a member of this organization. [switchLink:Switch accounts]?",{email:e.email,switchLink:(0,C.tZ)(x.Z,{to:"","data-test-id":"existing-member-link",onClick:this.handleLogout})}))}},{key:"authenticationActions",get:function(){var e=this.state.inviteDetails;return(0,C.tZ)(g.Fragment,null,!e.requireSso&&(0,C.tZ)("p",{"data-test-id":"action-info-general"},(0,S.t)("To continue, you must either create a new account, or login to an\n              existing Sentry account.")),e.needsSso&&(0,C.tZ)("p",{"data-test-id":"action-info-sso"},e.requireSso?(0,S._N)("Note that [orgSlug] has required Single Sign-On (SSO) using\n               [authProvider]. You may create an account by authenticating with\n               the organization's SSO provider.",{orgSlug:(0,C.tZ)("strong",null,e.orgSlug),authProvider:e.ssoProvider}):(0,S._N)("Note that [orgSlug] has enabled Single Sign-On (SSO) using\n               [authProvider]. You may create an account by authenticating with\n               the organization's SSO provider.",{orgSlug:(0,C.tZ)("strong",null,e.orgSlug),authProvider:e.ssoProvider})),(0,C.tZ)(N,null,(0,C.tZ)(z,null,e.needsSso&&(0,C.tZ)(Z.ZP,{label:"sso-login",priority:"primary",href:this.makeNextUrl("/auth/login/".concat(e.orgSlug,"/"))},(0,S.t)("Join with %s",e.ssoProvider)),!e.requireSso&&(0,C.tZ)(Z.ZP,{label:"create-account",priority:"primary",href:this.makeNextUrl("/auth/register/")},(0,S.t)("Create a new account"))),!e.requireSso&&(0,C.tZ)(v.Z,{href:this.makeNextUrl("/auth/login/"),openInNewTab:!1,"data-test-id":"link-with-existing"},(0,S.t)("Login using an existing account"))))}},{key:"warning2fa",get:function(){var e=this.state.inviteDetails;return(0,C.tZ)(g.Fragment,null,(0,C.tZ)("p",{"data-test-id":"2fa-warning"},(0,S._N)("To continue, [orgSlug] requires all members to configure two-factor authentication.",{orgSlug:e.orgSlug})),(0,C.tZ)(N,null,(0,C.tZ)(Z.ZP,{priority:"primary",to:"/settings/account/security/"},(0,S.t)("Configure Two-Factor Auth"))))}},{key:"acceptActions",get:function(){var e=this.state,t=e.inviteDetails,n=e.accepting;return(0,C.tZ)(N,null,(0,C.tZ)(Z.ZP,{label:"join-organization",priority:"primary",disabled:n,onClick:this.handleAcceptInvite},(0,S.t)("Join the %s organization",t.orgSlug)))}},{key:"renderError",value:function(){return(0,C.tZ)(w.Z,null,(0,C.tZ)(b.Z,{type:"warning"},(0,S.t)("This organization invite link is no longer valid.")))}},{key:"renderBody",value:function(){var e=this.state,t=e.inviteDetails,n=e.acceptError;return(0,C.tZ)(w.Z,null,(0,C.tZ)(P.Z,{title:(0,S.t)("Accept organization invite")}),n&&(0,C.tZ)(b.Z,{type:"error"},(0,S.t)("Failed to join this organization. Please try again")),(0,C.tZ)(R,{"data-test-id":"accept-invite"},(0,S._N)("[orgSlug] is using Sentry to track and debug errors.",{orgSlug:(0,C.tZ)("strong",null,t.orgSlug)})),t.needsAuthentication?this.authenticationActions:t.existingMember?this.existingMemberAlert:t.needs2fa?this.warning2fa:this.acceptActions)}}]),p}(_.Z),N=(0,d.Z)("div",{target:"e23xixm0",label:"Actions"})("display:flex;align-items:center;justify-content:space-between;margin-bottom:",(0,j.Z)(3),";"),z=(0,d.Z)("span",{target:"e23xixm1",label:"ActionsLeft"})("> a{margin-right:",(0,j.Z)(1),";}"),R=(0,d.Z)("p",{target:"e23xixm2",label:"InviteDescription"})({name:"1x1uhd2",styles:"font-size:1.2em;"});const T=A},"./app/views/asyncView.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n("../../../../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("../../../../node_modules/@babel/runtime/helpers/esm/createClass.js"),s=n("../../../../node_modules/@babel/runtime/helpers/esm/inherits.js"),o=n("../../../../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),a=n("../../../../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=(n("../../../../node_modules/react/index.js"),n("../../../../node_modules/react-document-title/index.js")),u=n.n(l),c=n("./app/components/asyncComponent.tsx"),d=n("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");var p=function(e){(0,s.Z)(c,e);var t,n,l=(t=c,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,a.Z)(t);if(n){var i=(0,a.Z)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,o.Z)(this,e)});function c(){return(0,r.Z)(this,c),l.apply(this,arguments)}return(0,i.Z)(c,[{key:"getTitle",value:function(){return""}},{key:"render",value:function(){var e=this.getTitle();return(0,d.tZ)(u(),{title:"".concat(e?"".concat(e," - "):"","Sentry")},this.renderComponent())}}]),c}(c.Z);p.displayName="AsyncView"},"./app/views/settings/components/settingsPageHeader.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>j});var r=n("../../../../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),i=n("../../../../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),s=n("../../../../node_modules/@babel/runtime/helpers/esm/createClass.js"),o=n("../../../../node_modules/@babel/runtime/helpers/esm/inherits.js"),a=n("../../../../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),l=n("../../../../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),u=n("../../../../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),c=n("../../../../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),d=n("../../../../node_modules/react/index.js"),p=n("./app/styles/organization.tsx"),m=n("./app/styles/space.tsx"),g=n("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");var f=function(e){(0,o.Z)(c,e);var t,n,u=(t=c,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,l.Z)(t);if(n){var i=(0,l.Z)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,a.Z)(this,e)});function c(){return(0,i.Z)(this,c),u.apply(this,arguments)}return(0,s.Z)(c,[{key:"render",value:function(){var e=this.props,t=e.icon,n=e.title,i=e.subtitle,s=e.action,o=e.tabs,a=e.noTitleStyles,l=e.body,u=(0,r.Z)(e,["icon","title","subtitle","action","tabs","noTitleStyles","body"]),c=!i;return(0,g.tZ)("div",u,(0,g.tZ)(h,{isNarrow:c},(0,g.tZ)(y,null,t&&(0,g.tZ)(v,null,t),n&&(0,g.tZ)(b,{tabs:o,styled:a},(0,g.tZ)(p.Gh,null,n),i&&(0,g.tZ)(Z,null,i))),s&&(0,g.tZ)(x,{isNarrow:c},s)),l&&(0,g.tZ)(S,null,l),o&&(0,g.tZ)(k,null,o))}}]),c}(d.Component);f.displayName="UnstyledSettingsPageHeader",(0,u.Z)(f,"defaultProps",{noTitleStyles:!1});var h=(0,c.Z)("div",{target:"e1uay4fd0",label:"TitleAndActions"})("display:flex;align-items:",(function(e){return e.isNarrow?"center":"flex-start"}),";"),y=(0,c.Z)("div",{target:"e1uay4fd1",label:"TitleWrapper"})({name:"1rr4qq7",styles:"flex:1;"}),b=(0,c.Z)("div",{target:"e1uay4fd2",label:"Title"})((function(e){return!e.styled&&"font-size: 20px; font-weight: 600;"}),";margin:",(0,m.Z)(4)," ",(0,m.Z)(2)," ",(0,m.Z)(3)," 0;"),Z=(0,c.Z)("div",{target:"e1uay4fd3",label:"Subtitle"})("color:",(function(e){return e.theme.gray400}),";font-weight:400;font-size:",(function(e){return e.theme.fontSizeLarge}),";padding:",(0,m.Z)(1.5)," 0 0;"),v=(0,c.Z)("div",{target:"e1uay4fd4",label:"Icon"})("margin-right:",(0,m.Z)(1),";"),x=(0,c.Z)("div",{target:"e1uay4fd5",label:"Action"})("margin-top:",(function(e){return e.isNarrow?"0":(0,m.Z)(4)}),";"),w=(0,c.Z)(f,{target:"e1uay4fd6",label:"SettingsPageHeader"})("font-size:14px;margin-top:-",(0,m.Z)(4),";"),S=(0,c.Z)("div",{target:"e1uay4fd7",label:"BodyWrapper"})("flex:1;margin:0 0 ",(0,m.Z)(3),";"),k=(0,c.Z)("div",{target:"e1uay4fd8",label:"TabsWrapper"})({name:"8k0ai7",styles:"flex:1;margin:0;"});const j=w}}]);
//# sourceMappingURL=AcceptOrganizationInvite.js.map