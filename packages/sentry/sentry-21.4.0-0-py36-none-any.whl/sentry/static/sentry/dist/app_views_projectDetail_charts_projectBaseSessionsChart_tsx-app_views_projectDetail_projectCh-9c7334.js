(self.webpackChunk=self.webpackChunk||[]).push([["app_views_projectDetail_charts_projectBaseSessionsChart_tsx-app_views_projectDetail_projectCh-9c7334","PerformanceLanding"],{"./app/components/radio.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var s=r("../../../../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),n=r("../../../../node_modules/@emotion/core/dist/core.browser.esm.js"),o=r("./app/styles/animations.tsx"),a=function(e){return(0,n.iv)("display:block;width:","small"===e.radioSize?"8px":"1rem",";height:","small"===e.radioSize?"8px":"1rem",";border-radius:50%;background-color:",e.theme.active,";animation:0.2s ",o.kQ," ease;opacity:",e.disabled?.4:null,";")},i=(0,s.Z)("input",{target:"e1d7o7s40",label:"Radio"})("display:flex;padding:0;width:",(function(e){return"small"===e.radioSize?"16px":"1.5em"}),";height:",(function(e){return"small"===e.radioSize?"16px":"1.5em"}),";position:relative;border-radius:50%;align-items:center;justify-content:center;border:1px solid ",(function(e){return e.theme.border}),";box-shadow:inset 0 1px 1px rgba(0,0,0,0.04);background:none;appearance:none;margin:0 !important;&:focus,&.focus-visible{outline:none !important;border:1px solid ",(function(e){return e.theme.border}),";box-shadow:rgba(209,202,216,0.5) 0 0 0 3px;}&:checked:after{content:'';",a,"}");i.defaultProps={type:"radio"};const l=i},"./app/views/projectDetail/charts/projectBaseSessionsChart.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>K});var s=r("../../../../node_modules/@babel/runtime/helpers/esm/extends.js"),n=r("../../../../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),o=r("../../../../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),a=r("../../../../node_modules/@babel/runtime/helpers/esm/createClass.js"),i=r("../../../../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),l=r("../../../../node_modules/@babel/runtime/helpers/esm/inherits.js"),u=r("../../../../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),c=r("../../../../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),p=r("../../../../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),d=r("../../../../node_modules/react/index.js"),m=r("../../../../node_modules/emotion-theming/dist/emotion-theming.browser.esm.js"),h=r("../../../../node_modules/lodash/isEqual.js"),f=r.n(h),v=r("./app/components/charts/chartZoom.tsx"),y=r("./app/components/charts/errorPanel.tsx"),g=r("./app/components/charts/lineChart.tsx"),b=r("./app/components/charts/releaseSeries.tsx"),Z=r("./app/components/charts/stackedAreaChart.tsx"),x=r("./app/components/charts/styles.tsx"),S=r("./app/components/charts/transitionChart.tsx"),j=r("./app/components/charts/transparentLoadingMask.tsx"),T=r("./app/components/charts/utils.tsx"),P=r("./app/components/questionTooltip.tsx"),O=r("./app/icons/index.tsx"),C=r("./app/locale.tsx"),w=r("./app/utils/getDynamicText.tsx"),D=r("./app/utils/withGlobalSelection.tsx"),R=r("./app/views/releases/utils/index.tsx"),A=r("./app/views/releases/utils/sessionTerm.tsx"),_=r("./app/views/projectDetail/projectCharts.tsx"),k=r("../../../../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),I=r("../../../../node_modules/@babel/runtime/regenerator/index.js"),E=r.n(I),z=r("../../../../node_modules/lodash/omit.js"),M=r.n(z),B=r("./app/actionCreators/indicator.tsx"),N=r("./app/components/organizations/globalSelectionHeader/getParams.tsx"),L=r("./app/utils.tsx"),V=r("./app/utils/getPeriod.tsx"),q=r("./app/views/releases/detail/overview/chart/utils.tsx"),F=r("./app/views/projectDetail/utils.tsx");function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function Y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach((function(t){(0,p.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var $=function(e){return M()(e,["api","organization","children","selection.datetime.utc"])},W=function(e){(0,l.Z)(n,e);var t,r,s=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,s=(0,c.Z)(t);if(r){var n=(0,c.Z)(this).constructor;e=Reflect.construct(s,arguments,n)}else e=s.apply(this,arguments);return(0,u.Z)(this,e)});function n(){var e;(0,o.Z)(this,n);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return e=s.call.apply(s,[this].concat(r)),(0,p.Z)((0,i.Z)(e),"state",{reloading:!1,errored:!1,timeseriesData:null,previousTimeseriesData:null,totalSessions:null}),(0,p.Z)((0,i.Z)(e),"unmounting",!1),(0,p.Z)((0,i.Z)(e),"fetchData",(0,k.Z)(E().mark((function t(){var r,s,n,o,a,i,l,u,c,p,d,m;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,s=r.api,n=r.selection,o=r.onTotalValuesChange,a=r.displayMode,i=r.disablePrevious,l=!i&&(0,F.D)(n.datetime),e.setState((function(e){return{reloading:null!==e.timeseriesData,errored:!1}})),t.prev=3,t.next=6,s.requestPromise(e.path,{query:e.queryParams({shouldFetchWithPrevious:l})});case 6:if(u=t.sent,c=a===_.D.SESSIONS?e.transformSessionCountData(u):e.transformData(u,{fetchedWithPrevious:l}),p=c.timeseriesData,d=c.previousTimeseriesData,m=c.totalSessions,!e.unmounting){t.next=10;break}return t.abrupt("return");case 10:e.setState({reloading:!1,timeseriesData:p,previousTimeseriesData:d,totalSessions:m}),o(m),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(3),(0,B.Iw)((0,C.t)("Error loading chart data")),e.setState({errored:!0,reloading:!1,timeseriesData:null,previousTimeseriesData:null,totalSessions:null});case 18:case"end":return t.stop()}}),t,null,[[3,14]])})))),e}return(0,a.Z)(n,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentDidUpdate",value:function(e){f()($(this.props),$(e))||this.fetchData()}},{key:"componentWillUnmount",value:function(){this.unmounting=!0}},{key:"path",get:function(){var e=this.props.organization;return"/organizations/".concat(e.slug,"/sessions/")}},{key:"queryParams",value:function(e){var t,r,s=e.shouldFetchWithPrevious,n=void 0!==s&&s,o=this.props.selection,a=o.datetime,i=o.projects,l=o.environments,u={field:"sum(session)",groupBy:"session.status",interval:(t=a,r=(0,T.Nm)(t),r>=T.Zn?"1d":r>=T.B8?"4h":"1h"),project:i[0],environment:l};if(!n)return Y(Y({},u),(0,N.Q)(a));var c=o.datetime.period,p=(0,V.X)({period:c,start:void 0,end:void 0},{shouldDoublePeriod:!0}).statsPeriod;return Y(Y({},u),{},{statsPeriod:p})}},{key:"transformData",value:function(e,t){var r=t.fetchedWithPrevious,s=void 0!==r&&r,n=this.props.theme,o=Math.floor(e.intervals.length/2),a=e.groups.reduce((function(e,t){return e+t.series["sum(session)"].slice(s?o:0).reduce((function(e,t){return t+e}),0)}),0),i=s?e.groups.reduce((function(e,t){return e+t.series["sum(session)"].slice(0,o).reduce((function(e,t){return t+e}),0)}),0):0,l=[{seriesName:(0,C.t)("This Period"),color:n.green300,data:e.intervals.slice(s?o:0).map((function(t,r){var n,l,u=e.groups.reduce((function(e,t){return e+t.series["sum(session)"].slice(s?o:0)[r]}),0),c=null!==(n=null===(l=e.groups.find((function(e){return"crashed"===e.by["session.status"]})))||void 0===l?void 0:l.series["sum(session)"].slice(s?o:0)[r])&&void 0!==n?n:0,p=(0,L.aQ)(c,u);return{name:t,value:0===a&&0===i?0:0===u?null:(0,R.Mf)(100-p)}}))}],u=s?{seriesName:(0,C.t)("Previous Period"),data:e.intervals.slice(0,o).map((function(t,r){var s,n,l=e.groups.reduce((function(e,t){return e+t.series["sum(session)"].slice(0,o)[r]}),0),u=null!==(s=null===(n=e.groups.find((function(e){return"crashed"===e.by["session.status"]})))||void 0===n?void 0:n.series["sum(session)"].slice(0,o)[r])&&void 0!==s?s:0,c=(0,L.aQ)(u,l);return{name:e.intervals[r+o],value:0===a&&0===i?0:0===l?null:(0,R.Mf)(100-c)}}))}:null;return{totalSessions:a,timeseriesData:l,previousTimeseriesData:u}}},{key:"transformSessionCountData",value:function(e){var t=(0,q.Yw)({response:e,field:"sum(session)"}),r=(0,q.A4)({response:e,field:"sum(session)",groupBy:"session.status",chartData:(0,q.gp)()});return{timeseriesData:Object.values(r),previousTimeseriesData:null,totalSessions:t}}},{key:"render",value:function(){var e=this.props.children,t=this.state,r=t.timeseriesData;return e({loading:null===r,reloading:t.reloading,errored:t.errored,totalSessions:t.totalSessions,previousTimeseriesData:t.previousTimeseriesData,timeseriesData:null!=r?r:[]})}}]),n}(d.Component);W.displayName="SessionsRequest";const X=(0,m.Zz)(W);var G=r("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");function H(e){var t=e.title,r=e.theme,s=e.organization,n=e.router,o=e.selection,a=e.api,i=e.onTotalValuesChange,l=e.displayMode,u=e.help,c=e.disablePrevious,p=o.projects,m=o.environments,h=o.datetime,f=h.start,g=h.end,Z=h.period,T=h.utc;return(0,G.tZ)(d.Fragment,null,(0,w.Z)({value:(0,G.tZ)(v.Z,{router:n,period:Z,start:f,end:g,utc:T},(function(e){return(0,G.tZ)(X,{api:a,selection:o,organization:s,onTotalValuesChange:i,displayMode:l,disablePrevious:c},(function(s){var n=s.errored,o=s.loading,a=s.reloading,i=s.timeseriesData,c=s.previousTimeseriesData;return(0,G.tZ)(b.Z,{utc:T,period:Z,start:f,end:g,projects:p,environments:m},(function(s){var p=s.releaseSeries;return n?(0,G.tZ)(y.Z,null,(0,G.tZ)(O.FC,{color:"gray300",size:"lg"})):(0,G.tZ)(S.Z,{loading:o,reloading:a},(0,G.tZ)(j.Z,{visible:a}),(0,G.tZ)(x.ws,null,t,u&&(0,G.tZ)(P.Z,{size:"sm",position:"top",title:u})),(0,G.tZ)(Q,{theme:r,zoomRenderProps:e,reloading:a,timeSeries:i,previousTimeSeries:c?[c]:void 0,releaseSeries:p,displayMode:l}))}))}))})),fixed:"".concat(t," Chart")}))}H.displayName="ProjectBaseSessionsChart";var Q=function(e){(0,l.Z)(m,e);var t,r,d=(t=m,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,s=(0,c.Z)(t);if(r){var n=(0,c.Z)(this).constructor;e=Reflect.construct(s,arguments,n)}else e=s.apply(this,arguments);return(0,u.Z)(this,e)});function m(){var e;(0,o.Z)(this,m);for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return e=d.call.apply(d,[this].concat(r)),(0,p.Z)((0,i.Z)(e),"state",{seriesSelection:{},forceUpdate:!1}),(0,p.Z)((0,i.Z)(e),"handleLegendSelectChanged",(function(t){var r=t.selected,s=Object.keys(r).reduce((function(e,t){return e[t]=r[t],e}),{});e.setState({seriesSelection:s,forceUpdate:!0},(function(){return e.setState({forceUpdate:!1})}))})),e}return(0,a.Z)(m,[{key:"shouldComponentUpdate",value:function(e,t){return!!t.forceUpdate||!f()(this.state.seriesSelection,t.seriesSelection)||e.releaseSeries!==this.props.releaseSeries&&!e.reloading&&!this.props.reloading||!(!this.props.reloading||e.reloading)||e.timeSeries!==this.props.timeSeries}},{key:"legend",get:function(){var e,t,r,s=this.props,o=s.theme,a=s.timeSeries,i=s.previousTimeSeries,l=s.releaseSeries,u=this.state.seriesSelection,c=(null===(e=l[0])||void 0===e||null===(t=e.markLine)||void 0===t?void 0:t.data.length)>=T.XO,d=a.filter((function(e){return A.U1.healthy!==e.seriesName})).some((function(e){return e.data.some((function(e){return e.value>0}))})),m=0===Object.keys(u).length&&(c||d)?(r={},(0,p.Z)(r,(0,C.t)("Releases"),!c),(0,p.Z)(r,A.U1.healthy,!d),r):u;return{right:10,top:0,icon:"circle",itemHeight:8,itemWidth:8,itemGap:12,align:"left",textStyle:{color:o.textColor,verticalAlign:"top",fontSize:11,fontFamily:o.text.family},data:[].concat((0,n.Z)(a.map((function(e){return e.seriesName}))),(0,n.Z)((null!=i?i:[]).map((function(e){return e.seriesName}))),(0,n.Z)(l.map((function(e){return e.seriesName})))),selected:m}}},{key:"chartOptions",get:function(){var e=this.props,t=e.theme,r=e.displayMode;return{grid:{left:"10px",right:"10px",top:"40px",bottom:"0px"},seriesOptions:{showSymbol:!1},tooltip:{trigger:"axis",truncate:80,valueFormatter:function(e){return null===e?"—":r===_.D.STABILITY?(0,R.zB)(e,0,3):"number"==typeof e?e.toLocaleString():e}},yAxis:r===_.D.STABILITY?{axisLabel:{color:t.gray200,formatter:function(e){return(0,R.zB)(e)}},scale:!0,max:100}:{min:0}}}},{key:"render",value:function(){var e=this.props,t=e.zoomRenderProps,r=e.timeSeries,o=e.previousTimeSeries,a=e.releaseSeries,i=e.displayMode===_.D.STABILITY?g.Z:Z.Z;return(0,G.tZ)(i,(0,s.Z)({},t,this.chartOptions,{legend:this.legend,series:Array.isArray(a)?[].concat((0,n.Z)(r),(0,n.Z)(a)):r,previousPeriod:o,onLegendSelectChanged:this.handleLegendSelectChanged,transformSinglePointToBar:!0}))}}]),m}(d.Component);Q.displayName="Chart";const K=(0,D.Z)((0,m.Zz)(H))},"./app/views/projectDetail/projectCharts.tsx":(e,t,r)=>{"use strict";r.d(t,{D:()=>ue,Z:()=>pe});var s=r("../../../../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),n=r("../../../../node_modules/@babel/runtime/helpers/esm/createClass.js"),o=r("../../../../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),a=r("../../../../node_modules/@babel/runtime/helpers/esm/inherits.js"),i=r("../../../../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),l=r("../../../../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),u=r("../../../../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),c=r("../../../../node_modules/react/index.js"),p=r("../../../../node_modules/react-router/es/index.js"),d=r("../../../../node_modules/emotion-theming/dist/emotion-theming.browser.esm.js"),m=r("./app/components/charts/barChart.tsx"),h=r("./app/components/charts/loadingPanel.tsx"),f=r("./app/components/charts/optionSelector.tsx"),v=r("./app/components/charts/styles.tsx"),y=r("./app/components/charts/utils.tsx"),g=r("./app/components/panels/index.tsx"),b=r("./app/components/placeholder.tsx"),Z=r("./app/constants/chartPalette.tsx"),x=r("./app/constants/notAvailableMessages.tsx"),S=r("./app/locale.tsx"),j=r("./app/utils.tsx"),T=r("./app/utils/analytics.tsx"),P=r("./app/utils/queryString.tsx"),O=r("./app/utils/withApi.tsx"),C=r("./app/views/releases/utils/sessionTerm.tsx"),w=r("./app/views/performance/data.tsx"),D=r("../../../../node_modules/@babel/runtime/helpers/esm/extends.js"),R=r("../../../../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),A=r("../../../../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),_=r("../../../../node_modules/@babel/runtime/regenerator/index.js"),k=r.n(_),I=r("../../../../node_modules/@sentry/minimal/esm/index.js"),E=r("./app/actionCreators/events.tsx"),z=r("./app/components/charts/eventsChart.tsx"),M=r("./app/components/organizations/globalSelectionHeader/getParams.tsx"),B=r("./app/components/organizations/globalSelectionHeader/utils.tsx"),N=r("./app/components/questionTooltip.tsx"),L=r("./app/utils/discover/charts.tsx"),V=r("./app/utils/getDynamicText.tsx"),q=r("./app/utils/withGlobalSelection.tsx"),F=r("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function Y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach((function(t){(0,u.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var $=function(e){(0,a.Z)(c,e);var t,r,o,u=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,l.Z)(r);if(o){var s=(0,l.Z)(this).constructor;e=Reflect.construct(t,arguments,s)}else e=t.apply(this,arguments);return(0,i.Z)(this,e)});function c(){return(0,s.Z)(this,c),u.apply(this,arguments)}return(0,n.Z)(c,[{key:"componentDidMount",value:function(){this.fetchTotalCount()}},{key:"componentDidUpdate",value:function(e){(0,B.WO)(this.props.selection,e.selection)||this.fetchTotalCount()}},{key:"fetchTotalCount",value:(t=(0,A.Z)(k().mark((function e(){var t,r,s,n,o,a,i,l,u,c;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,r=t.api,s=t.organization,n=t.selection,o=t.onTotalValuesChange,a=t.query,i=n.projects,l=n.environments,u=n.datetime,e.prev=2,e.next=5,(0,E.JE)(r,s.slug,Y({field:[],query:a,environment:l,project:i.map((function(e){return String(e)}))},(0,M.Q)(u)));case 5:c=e.sent,o(c),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),o(null),I.Tb(e.t0);case 13:case"end":return e.stop()}}),e,this,[[2,9]])}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this.props,t=e.router,r=e.organization,s=e.selection,n=e.api,o=e.yAxis,a=e.query,i=e.field,l=e.title,u=e.theme,c=e.help,p=(0,R.Z)(e,["router","organization","selection","api","yAxis","query","field","title","theme","help"]),d=s.projects,m=s.environments,h=s.datetime,f=h.start,y=h.end,g=h.period,b=h.utc;return(0,V.Z)({value:(0,F.tZ)(z.Z,(0,D.Z)({},p,{router:t,organization:r,showLegend:!0,yAxis:o,query:a,api:n,projects:d,environments:m,start:f,end:y,period:g,utc:b,field:i,currentSeriesName:(0,S.t)("This Period"),previousSeriesName:(0,S.t)("Previous Period"),disableableSeries:[(0,S.t)("This Period"),(0,S.t)("Previous Period")],chartHeader:(0,F.tZ)(v.ws,null,l,c&&(0,F.tZ)(N.Z,{size:"sm",position:"top",title:c})),legendOptions:{right:10,top:0},chartOptions:{grid:{left:"10px",right:"10px",top:"40px",bottom:"0px"},yAxis:{axisLabel:{color:u.gray200,formatter:function(e){return(0,L.gu)(e,o)}},scale:!0}}})),fixed:"".concat(l," Chart")})}}]),c}(c.Component);$.displayName="ProjectBaseEventsChart";const W=(0,q.Z)((0,d.Zz)($));var X=r("./app/views/projectDetail/charts/projectBaseSessionsChart.tsx"),G=r("../../../../node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),H=r("../../../../node_modules/@babel/runtime/helpers/esm/get.js"),Q=r("./app/components/asyncComponent.tsx"),K=r("./app/components/charts/baseChart.tsx"),J=r("./app/components/charts/transitionChart.tsx"),ee=r("./app/components/charts/transparentLoadingMask.tsx"),te=r("./app/constants/index.tsx");function re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function se(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?re(Object(r),!0).forEach((function(t){(0,u.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):re(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ne=["1h","24h","7d","14d","30d"],oe=function(e){(0,a.Z)(u,e);var t,r,o=(t=u,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,s=(0,l.Z)(t);if(r){var n=(0,l.Z)(this).constructor;e=Reflect.construct(s,arguments,n)}else e=s.apply(this,arguments);return(0,i.Z)(this,e)});function u(){return(0,s.Z)(this,u),o.apply(this,arguments)}return(0,n.Z)(u,[{key:"getDefaultState",value:function(){return se(se({},(0,H.Z)((0,l.Z)(u.prototype),"getDefaultState",this).call(this)),{},{projects:null})}},{key:"getEndpoints",value:function(){var e=this.props,t=e.organization,r=e.projectId;return r?[["projects","/organizations/".concat(t.slug,"/projects/"),{query:{statsPeriod:this.getStatsPeriod(),query:"id:".concat(r)}}]]:[]}},{key:"componentDidMount",value:function(){var e=this.props.location;ne.includes(e.query.statsPeriod)||p.browserHistory.replace({pathname:e.pathname,query:se(se({},e.query),{},{statsPeriod:this.getStatsPeriod(),start:void 0,end:void 0})})}},{key:"onLoadAllEndpointsSuccess",value:function(){var e,t,r,s;this.props.onTotalValuesChange(null!==(e=null===(t=this.state.projects)||void 0===t||null===(r=t[0])||void 0===r||null===(s=r.stats)||void 0===s?void 0:s.reduce((function(e,t){return e+(0,G.Z)(t,2)[1]}),0))&&void 0!==e?e:null)}},{key:"getStatsPeriod",value:function(){var e=this.props.location.query.statsPeriod;return ne.includes(e)?e:te.GY}},{key:"getSeries",value:function(){var e,t,r,s=this.state.projects;return[{cursor:"normal",name:(0,S.t)("Errors"),type:"bar",data:null!==(e=null==s||null===(t=s[0])||void 0===t||null===(r=t.stats)||void 0===r?void 0:r.map((function(e){var t=(0,G.Z)(e,2);return[1e3*t[0],t[1]]})))&&void 0!==e?e:[]}]}},{key:"renderLoading",value:function(){return this.renderBody()}},{key:"renderBody",value:function(){var e=this.props.theme,t=this.state,r=t.loading,s=t.reloading;return(0,V.Z)({value:(0,F.tZ)(J.Z,{loading:r,reloading:s},(0,F.tZ)(ee.Z,{visible:s}),(0,F.tZ)(v.ws,null,(0,S.t)("Daily Errors")),(0,F.tZ)(K.Z,{series:this.getSeries(),isGroupedByDate:!0,showTimeInTooltip:!0,colors:[e.purple300,e.purple200],grid:{left:"10px",right:"10px",top:"40px",bottom:"0px"}})),fixed:(0,S.t)("Number of Errors Chart")})}}]),u}(Q.Z);const ae=(0,d.Zz)(oe);function ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(r),!0).forEach((function(t){(0,u.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ue;!function(e){e.APDEX="apdex",e.FAILURE_RATE="failure_rate",e.TPM="tpm",e.ERRORS="errors",e.TRANSACTIONS="transactions",e.STABILITY="crash_free",e.SESSIONS="sessions"}(ue||(ue={}));var ce=function(e){(0,a.Z)(O,e);var t,r,d=(t=O,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,s=(0,l.Z)(t);if(r){var n=(0,l.Z)(this).constructor;e=Reflect.construct(s,arguments,n)}else e=s.apply(this,arguments);return(0,i.Z)(this,e)});function O(){var e;(0,s.Z)(this,O);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e=d.call.apply(d,[this].concat(r)),(0,u.Z)((0,o.Z)(e),"state",{totalValues:null}),(0,u.Z)((0,o.Z)(e),"handleDisplayModeChange",(function(t){var r=e.props,s=r.location,n=r.chartId,o=r.chartIndex,a=r.organization;(0,T.ec)({eventKey:"project_detail.change_chart".concat(o+1),eventName:"Project Detail: Change Chart #".concat(o+1),organization_id:parseInt(a.id,10),metric:t}),p.browserHistory.push({pathname:s.pathname,query:le(le({},s.query),{},(0,u.Z)({},n,t))})})),(0,u.Z)((0,o.Z)(e),"handleTotalValuesChange",(function(t){t!==e.state.totalValues&&e.setState({totalValues:t})})),e}return(0,n.Z)(O,[{key:"defaultDisplayModes",get:function(){var e=this.props,t=e.hasSessions,r=e.hasTransactions;return t||r?t&&!r?[ue.STABILITY,ue.ERRORS]:!t&&r?[ue.FAILURE_RATE,ue.APDEX]:[ue.STABILITY,ue.APDEX]:[ue.ERRORS]}},{key:"otherActiveDisplayModes",get:function(){var e=this,t=this.props,r=t.location,s=t.visibleCharts,n=t.chartId;return s.filter((function(e){return e!==n})).map((function(t){return(0,P.ro)(r.query[t],e.defaultDisplayModes[s.findIndex((function(e){return e===t}))])}))}},{key:"displayMode",get:function(){var e=this.props,t=e.location,r=e.chartId,s=e.chartIndex,n=(0,P.ro)(t.query[r])||this.defaultDisplayModes[s];return Object.values(ue).includes(n)?n:this.defaultDisplayModes[s]}},{key:"displayModes",get:function(){var e=this.props,t=e.organization,r=e.hasSessions,s=e.hasTransactions,n=t.features.includes("performance-view"),o=x.Z.performance,a=x.Z.releaseHealth;return[{value:ue.STABILITY,label:(0,S.t)("Crash Free Sessions"),disabled:this.otherActiveDisplayModes.includes(ue.STABILITY)||!r,tooltip:r?void 0:a},{value:ue.APDEX,label:(0,S.t)("Apdex"),disabled:this.otherActiveDisplayModes.includes(ue.APDEX)||!n||!s,tooltip:n&&s?(0,w.$r)(t,w.V$.APDEX):o},{value:ue.FAILURE_RATE,label:(0,S.t)("Failure Rate"),disabled:this.otherActiveDisplayModes.includes(ue.FAILURE_RATE)||!n||!s,tooltip:n&&s?(0,w.$r)(t,w.V$.FAILURE_RATE):o},{value:ue.TPM,label:(0,S.t)("Transactions Per Minute"),disabled:this.otherActiveDisplayModes.includes(ue.TPM)||!n||!s,tooltip:n&&s?(0,w.$r)(t,w.V$.TPM):o},{value:ue.ERRORS,label:(0,S.t)("Number of Errors"),disabled:this.otherActiveDisplayModes.includes(ue.ERRORS)},{value:ue.SESSIONS,label:(0,S.t)("Number of Sessions"),disabled:this.otherActiveDisplayModes.includes(ue.SESSIONS)||!r,tooltip:r?void 0:a},{value:ue.TRANSACTIONS,label:(0,S.t)("Number of Transactions"),disabled:this.otherActiveDisplayModes.includes(ue.TRANSACTIONS)||!n||!s,tooltip:n&&s?void 0:o}]}},{key:"summaryHeading",get:function(){switch(this.displayMode){case ue.ERRORS:return(0,S.t)("Total Errors");case ue.STABILITY:case ue.SESSIONS:return(0,S.t)("Total Sessions");case ue.APDEX:case ue.FAILURE_RATE:case ue.TPM:case ue.TRANSACTIONS:default:return(0,S.t)("Total Transactions")}}},{key:"barChartInterval",get:function(){var e=this.props.location.query,t=(0,y.Nm)(le(le({},e),{},{period:(0,P.ro)(e.statsPeriod)}));return t>=y.$i?"1d":t>=y.IZ?"12h":t>y.w3?"6h":t===y.w3?"1h":t<=y.dV?"1m":"15m"}},{key:"render",value:function(){var e=this.props,t=e.api,r=e.router,s=e.location,n=e.organization,o=e.theme,a=e.projectId,i=e.hasSessions,l=this.state.totalValues,u=n.features.includes("discover-basic"),p=this.displayMode;return(0,F.tZ)(g.s_,null,(0,F.tZ)(v.BO,null,(0,j.ri)(i)?(0,F.tZ)(c.Fragment,null,p===ue.APDEX&&(0,F.tZ)(W,{title:(0,S.t)("Apdex"),help:(0,w.$r)(n,w.V$.APDEX),query:"event.type:transaction",yAxis:"apdex(".concat(n.apdexThreshold,")"),field:["apdex(".concat(n.apdexThreshold,")")],api:t,router:r,organization:n,onTotalValuesChange:this.handleTotalValuesChange,colors:[Z.Z[0][0],o.purple200]}),p===ue.FAILURE_RATE&&(0,F.tZ)(W,{title:(0,S.t)("Failure Rate"),help:(0,w.$r)(n,w.V$.FAILURE_RATE),query:"event.type:transaction",yAxis:"failure_rate()",field:["failure_rate()"],api:t,router:r,organization:n,onTotalValuesChange:this.handleTotalValuesChange,colors:[o.red300,o.purple200]}),p===ue.TPM&&(0,F.tZ)(W,{title:(0,S.t)("Transactions Per Minute"),help:(0,w.$r)(n,w.V$.TPM),query:"event.type:transaction",yAxis:"tpm()",field:["tpm()"],api:t,router:r,organization:n,onTotalValuesChange:this.handleTotalValuesChange,colors:[o.yellow300,o.purple200],disablePrevious:!0}),p===ue.ERRORS&&(u?(0,F.tZ)(W,{title:(0,S.t)("Number of Errors"),query:"!event.type:transaction",yAxis:"count()",field:["count()"],api:t,router:r,organization:n,onTotalValuesChange:this.handleTotalValuesChange,colors:[o.purple300,o.purple200],interval:this.barChartInterval,chartComponent:m.Z,disableReleases:!0}):(0,F.tZ)(ae,{organization:n,projectId:a,location:s,onTotalValuesChange:this.handleTotalValuesChange})),p===ue.TRANSACTIONS&&(0,F.tZ)(W,{title:(0,S.t)("Number of Transactions"),query:"event.type:transaction",yAxis:"count()",field:["count()"],api:t,router:r,organization:n,onTotalValuesChange:this.handleTotalValuesChange,colors:[o.gray200,o.purple200],interval:this.barChartInterval,chartComponent:m.Z,disableReleases:!0}),p===ue.STABILITY&&(0,F.tZ)(X.Z,{title:(0,S.t)("Crash Free Sessions"),help:(0,C.RE)(C._k.STABILITY,null),router:r,api:t,organization:n,onTotalValuesChange:this.handleTotalValuesChange,displayMode:p}),p===ue.SESSIONS&&(0,F.tZ)(X.Z,{title:(0,S.t)("Number of Sessions"),router:r,api:t,organization:n,onTotalValuesChange:this.handleTotalValuesChange,displayMode:p,disablePrevious:!0})):(0,F.tZ)(h.Z,null)),(0,F.tZ)(v.xx,null,(0,j.ri)(i)?(0,F.tZ)(c.Fragment,null,(0,F.tZ)(v.m2,null,(0,F.tZ)(v.OT,null,this.summaryHeading),(0,F.tZ)(v.uN,null,"number"==typeof l?l.toLocaleString():"—")),(0,F.tZ)(v.m2,null,(0,F.tZ)(f.Z,{title:(0,S.t)("Display"),selected:p,options:this.displayModes,onChange:this.handleDisplayModeChange}))):(0,F.tZ)(b.Z,{height:"34px"})))}}]),O}(c.Component);ce.displayName="ProjectCharts";const pe=(0,O.Z)((0,d.Zz)(ce))},"./app/views/projectDetail/utils.tsx":(e,t,r)=>{"use strict";r.d(t,{D:()=>n,W:()=>o});var s=r("./app/components/charts/utils.tsx");function n(e){var t=e.start,r=e.end,n=e.period;return!t&&!r&&(0,s.Sw)(!0,n)}function o(e,t){return e.query.environment!==t.query.environment||e.query.project!==t.query.project}},"./app/views/releases/list/releaseLanding.tsx":(e,t,r)=>{"use strict";r.d(t,{J:()=>I,Z:()=>B});var s=r("../../../../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),n=r("../../../../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=r("../../../../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),a=r("../../../../node_modules/@babel/runtime/helpers/esm/createClass.js"),i=r("../../../../node_modules/@babel/runtime/helpers/esm/inherits.js"),l=r("../../../../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),u=r("../../../../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),c=r("../../../../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),p=r("../../../../node_modules/react/index.js"),d=r("./images/spot/releases-empty-state.svg"),m=r.n(d),h=r("./images/spot/releases-tour-commits.svg"),f=r.n(h),v=r("./images/spot/releases-tour-email.svg"),y=r.n(v),g=r("./images/spot/releases-tour-resolution.svg"),b=r.n(g),Z=r("./images/spot/releases-tour-stats.svg"),x=r.n(Z),S=r("./app/components/button.tsx"),j=r("./app/components/buttonBar.tsx"),T=r("./app/components/emptyStateWarning.tsx"),P=r("./app/components/modals/featureTourModal.tsx"),O=r("./app/components/onboardingPanel.tsx"),C=r("./app/locale.tsx"),w=r("./app/utils/analytics.tsx"),D=r("./app/views/asyncView.tsx"),R=r("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,s=(0,u.Z)(e);if(t){var n=(0,u.Z)(this).constructor;r=Reflect.construct(s,arguments,n)}else r=s.apply(this,arguments);return(0,l.Z)(this,r)}}var _="https://docs.sentry.io/product/releases/",k=(0,R.tZ)(S.ZP,{external:!0,href:_},(0,C.t)("Setup")),I=[{title:(0,C.t)("Suspect Commits"),image:(0,R.tZ)(P.oP,{src:f()}),body:(0,R.tZ)(P.RB,null,(0,C.t)("Sentry suggests which commit caused an issue and who is likely responsible so you can triage.")),actions:k},{title:(0,C.t)("Release Stats"),image:(0,R.tZ)(P.oP,{src:x()}),body:(0,R.tZ)(P.RB,null,(0,C.t)("Get an overview of the commits in each release, and which issues were introduced or fixed.")),actions:k},{title:(0,C.t)("Easily Resolve"),image:(0,R.tZ)(P.oP,{src:b()}),body:(0,R.tZ)(P.RB,null,(0,C.t)("Automatically resolve issues by including the issue number in your commit message.")),actions:k},{title:(0,C.t)("Deploy Emails"),image:(0,R.tZ)(P.oP,{src:y()}),body:(0,R.tZ)(P.RB,null,(0,C.t)("Receive email notifications about when your code gets deployed. This can be customized in settings."))}],E=function(e){(0,i.Z)(r,e);var t=A(r);function r(){return(0,o.Z)(this,r),t.apply(this,arguments)}return(0,a.Z)(r,[{key:"getEndpoints",value:function(){var e=this.props.organization.slug;return[["releases","/organizations/".concat(e,"/releases/"),{query:{per_page:1,summaryStatsPeriod:"30d"}}]]}},{key:"renderBody",value:function(){var e=this.props,t=e.organization,r=e.projectId;return 0===this.state.releases.length?(0,R.tZ)(z,{organization:t,projectId:r}):(0,R.tZ)(T.Z,{small:!0},(0,C.t)("There are no releases."))}}]),r}(D.Z),z=function(e){(0,i.Z)(r,e);var t=A(r);function r(){var e;(0,o.Z)(this,r);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return e=t.call.apply(t,[this].concat(i)),(0,n.Z)((0,s.Z)(e),"handleTourAdvance",(function(t,r){var s=e.props,n=s.organization,o=s.projectId;(0,w.ec)({eventKey:"releases.tour.advance",eventName:"Releases: Tour Advance",organization_id:parseInt(n.id,10),project_id:o,step:t,duration:r})})),(0,n.Z)((0,s.Z)(e),"handleClose",(function(t,r){var s=e.props,n=s.organization,o=s.projectId;(0,w.ec)({eventKey:"releases.tour.close",eventName:"Releases: Tour Close",organization_id:parseInt(n.id,10),project_id:o,step:t,duration:r})})),e}return(0,a.Z)(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.organization,r=e.projectId;(0,w.ec)({eventKey:"releases.landing_card_viewed",eventName:"Releases: Landing Card Viewed",organization_id:parseInt(t.id,10),project_id:r})}},{key:"render",value:function(){return(0,R.tZ)(O.Z,{image:(0,R.tZ)("img",{src:m()})},(0,R.tZ)("h3",null,(0,C.t)("Demystify Releases")),(0,R.tZ)("p",null,(0,C.t)("Did you know how many errors your latest release triggered? We do. And more, too.")),(0,R.tZ)(M,{gap:1},(0,R.tZ)(P.ZP,{steps:I,onAdvance:this.handleTourAdvance,onCloseModal:this.handleClose,doneText:(0,C.t)("Start Setup"),doneUrl:_},(function(e){var t=e.showModal;return(0,R.tZ)(S.ZP,{priority:"default",onClick:t},(0,C.t)("Take a Tour"))})),(0,R.tZ)(S.ZP,{priority:"primary",href:_,external:!0},(0,C.t)("Start Setup"))))}}]),r}(p.Component);z.displayName="Promo";var M=(0,c.Z)(j.Z,{target:"ecpzmjl0",label:"ButtonList"})({name:"1tuvsuv",styles:"grid-template-columns:repeat(auto-fit,minmax(130px,max-content));"});const B=E},"./app/views/settings/components/forms/controls/radioGroup.tsx":(e,t,r)=>{"use strict";r.d(t,{V:()=>h,Z:()=>g});var s=r("../../../../node_modules/@babel/runtime/helpers/esm/extends.js"),n=r("../../../../node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),o=r("../../../../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),a=r("../../../../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),i=r("../../../../node_modules/react/index.js"),l=r("../../../../node_modules/@emotion/is-prop-valid/dist/is-prop-valid.browser.esm.js"),u=r("./app/components/radio.tsx"),c=r("./app/styles/space.tsx"),p=r("../../../../node_modules/@emotion/core/dist/core.browser.esm.js"),d=function(e){var t=e.value,r=e.disabled,a=e.choices,l=e.label,c=e.onChange,d=e.orientInline,m=(0,o.Z)(e,["value","disabled","choices","label","onChange","orientInline"]);return(0,p.tZ)(f,(0,s.Z)({orientInline:d},m,{role:"radiogroup","aria-labelledby":l}),(a||[]).map((function(e,s){var o=(0,n.Z)(e,3),a=o[0],l=o[1],d=o[2];return(0,p.tZ)(h,{key:s,role:"radio",index:s,"aria-checked":t===a,disabled:r},(0,p.tZ)(u.Z,{"aria-label":a,disabled:r,checked:t===a,onChange:function(e){return!r&&c(a,e)}}),(0,p.tZ)(v,{disabled:r},l),d&&(0,p.tZ)(i.Fragment,null,(0,p.tZ)("div",null),(0,p.tZ)(y,null,d)))})))};d.displayName="RadioGroup";var m=function(e){return!["disabled","animate"].includes(e)&&(0,l.Z)(e)},h=(0,a.Z)("label",{shouldForwardProp:m,target:"e1r42lk40",label:"RadioLineItem"})("display:grid;grid-gap:0.25em 0.5em;grid-template-columns:max-content auto;align-items:center;cursor:",(function(e){return e.disabled?"default":"pointer"}),";outline:none;font-weight:normal;margin:0;"),f=(0,a.Z)("div",{target:"e1r42lk41",label:"Container"})("display:grid;grid-gap:",(function(e){return(0,c.Z)(e.orientInline?3:1)}),";grid-auto-flow:",(function(e){return e.orientInline?"column":"row"}),";grid-auto-rows:max-content;grid-auto-columns:max-content;"),v=(0,a.Z)("div",{shouldForwardProp:m,target:"e1r42lk42",label:"RadioLineText"})("opacity:",(function(e){return e.disabled?.4:null}),";"),y=(0,a.Z)("div",{target:"e1r42lk43",label:"Description"})("color:",(function(e){return e.theme.gray300}),";font-size:",(function(e){return e.theme.fontSizeRelativeSmall}),";line-height:1.4em;");const g=d},"./images/spot/releases-empty-state.svg":(e,t,r)=>{e.exports=r.p+"spot/releases-empty-state.957883.svg"},"./images/spot/releases-tour-commits.svg":(e,t,r)=>{e.exports=r.p+"spot/releases-tour-commits.da8e6d.svg"},"./images/spot/releases-tour-email.svg":(e,t,r)=>{e.exports=r.p+"spot/releases-tour-email.95829e.svg"},"./images/spot/releases-tour-resolution.svg":(e,t,r)=>{e.exports=r.p+"spot/releases-tour-resolution.5f727e.svg"},"./images/spot/releases-tour-stats.svg":(e,t,r)=>{e.exports=r.p+"spot/releases-tour-stats.239b9d.svg"}}]);
//# sourceMappingURL=app_views_projectDetail_charts_projectBaseSessionsChart_tsx-app_views_projectDetail_projectCh-9c7334.js.map