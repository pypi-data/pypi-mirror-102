(self.webpackChunk=self.webpackChunk||[]).push([["GroupActivity"],{"./app/components/commitLink.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>l}),r("../../../../node_modules/react/index.js");var s=r("./app/components/button.tsx"),n=r("./app/components/links/externalLink.tsx"),o=r("./app/icons/index.tsx"),i=r("./app/locale.tsx"),a=r("./app/utils.tsx"),u=r("../../../../node_modules/@emotion/core/dist/core.browser.esm.js"),c=[{icon:(0,u.tZ)(o.Uv,{size:"xs"}),providerIds:["github","integrations:github","integrations:github_enterprise"],commitUrl:function(e){var t=e.baseUrl,r=e.commitId;return"".concat(t,"/commit/").concat(r)}},{icon:(0,u.tZ)(o.Ub,{size:"xs"}),providerIds:["bitbucket","integrations:bitbucket"],commitUrl:function(e){var t=e.baseUrl,r=e.commitId;return"".concat(t,"/commits/").concat(r)}},{icon:(0,u.tZ)(o.mT,{size:"xs"}),providerIds:["visualstudio","integrations:vsts"],commitUrl:function(e){var t=e.baseUrl,r=e.commitId;return"".concat(t,"/commit/").concat(r)}},{icon:(0,u.tZ)(o.Et,{size:"xs"}),providerIds:["gitlab","integrations:gitlab"],commitUrl:function(e){var t=e.baseUrl,r=e.commitId;return"".concat(t,"/commit/").concat(r)}}];const l=function(e){var t=e.inline,r=e.commitId,o=e.repository;if(!r||!o)return(0,u.tZ)("span",null,(0,i.t)("Unknown Commit"));var l=(0,a.e4)(r),d=c.find((function(e){return!!o.provider&&e.providerIds.includes(o.provider.id)}));if(void 0===d)return(0,u.tZ)("span",null,l);var p=o.url&&d.commitUrl({commitId:r,baseUrl:o.url});return t?(0,u.tZ)(n.Z,{className:"inline-commit",href:p},d.icon," "+l):(0,u.tZ)(s.ZP,{external:!0,href:p,size:"small",icon:d.icon},l)}},"./app/components/pullRequestLink.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>i}),r("../../../../node_modules/react/index.js");var s=r("./app/components/links/externalLink.tsx"),n=r("./app/icons/index.tsx"),o=r("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");const i=function(e){var t=e.pullRequest,r=e.repository,i=e.inline,a="".concat(r.name," #").concat(t.id,": ").concat(t.title);return t.externalUrl?(0,o.tZ)(s.Z,{className:i?"inline-commit":"btn btn-default btn-sm",href:t.externalUrl},function(e){if(!e.provider)return null;var t=e.provider.id;switch(t.includes(":")?t.split(":").pop():t){case"github":return(0,o.tZ)(n.Uv,{size:"xs"});case"gitlab":return(0,o.tZ)(n.Et,{size:"xs"});case"bitbucket":return(0,o.tZ)(n.Ub,{size:"xs"});default:return null}}(r),i?"":" ",a):(0,o.tZ)("span",null,a)}},"./app/components/reprocessedBox.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>_});var s=r("../../../../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),n=r("../../../../node_modules/@babel/runtime/helpers/esm/createClass.js"),o=r("../../../../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),i=r("../../../../node_modules/@babel/runtime/helpers/esm/inherits.js"),a=r("../../../../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),u=r("../../../../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),c=r("../../../../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),l=r("../../../../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),d=r("../../../../node_modules/react/index.js"),p=r("./app/components/events/styles.tsx"),m=r("./app/components/links/link.tsx"),h=r("./app/icons/index.tsx"),v=r("./app/locale.tsx"),g=r("./app/styles/space.tsx"),f=r("./app/utils/localStorage.tsx"),Z=r("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");var y=function(e){(0,i.Z)(d,e);var t,r,l=(t=d,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,s=(0,u.Z)(t);if(r){var n=(0,u.Z)(this).constructor;e=Reflect.construct(s,arguments,n)}else e=s.apply(this,arguments);return(0,a.Z)(this,e)});function d(){var e;(0,s.Z)(this,d);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e=l.call.apply(l,[this].concat(r)),(0,c.Z)((0,o.Z)(e),"state",{isBannerHidden:"true"===f.Z.getItem(e.getBannerUniqueId())}),(0,c.Z)((0,o.Z)(e),"handleBannerDismiss",(function(){f.Z.setItem(e.getBannerUniqueId(),"true"),e.setState({isBannerHidden:!0})})),e}return(0,n.Z)(d,[{key:"getBannerUniqueId",value:function(){var e=this.props.reprocessActivity.id;return"reprocessed-activity-".concat(e,"-banner-dismissed")}},{key:"renderMessage",value:function(){var e=this.props,t=e.orgSlug,r=e.reprocessActivity,s=e.groupCount,n=e.groupId,o=r.data,i=o.eventCount,a=o.oldGroupId,u=o.newGroupId,c="/organizations/".concat(t,"/issues/?query=reprocessing.original_issue_id:").concat(a);return 0===s?(0,v._N)("All events in this issue were moved during reprocessing. [link]",{link:(0,Z.tZ)(m.Z,{to:c},(0,v.tn)("See %s new event","See %s new events",i))}):(0,v._N)("Events in this issue were successfully reprocessed. [link]",{link:(0,Z.tZ)(m.Z,{to:c},u===Number(n)?(0,v.tn)("See %s reprocessed event","See %s reprocessed events",i):(0,v.tn)("See %s new event","See %s new events",i))})}},{key:"render",value:function(){if(this.state.isBannerHidden)return null;var e=this.props.className;return(0,Z.tZ)(p.UP,{priority:"success",className:e},(0,Z.tZ)(b,null,(0,Z.tZ)(h.DL,{color:"green300",isCircled:!0}),(0,Z.tZ)("span",null,this.renderMessage()),(0,Z.tZ)(x,{color:"green300","aria-label":(0,v.t)("Dismiss"),isCircled:!0,onClick:this.handleBannerDismiss})))}}]),d}(d.Component);y.displayName="ReprocessedBox";const _=y;var b=(0,l.Z)(p._B,{target:"e2r0jxr0",label:"StyledBannerSummary"})("& > svg:last-child{margin-right:0;margin-left:",(0,g.Z)(1),";}"),x=(0,l.Z)(h.bM,{target:"e2r0jxr1",label:"StyledIconClose"})({name:"4g6ai3",styles:"cursor:pointer;"})},"./app/views/organizationGroupDetails/groupActivity.tsx":(e,t,r)=>{"use strict";r.r(t),r.d(t,{GroupActivity:()=>q,default:()=>J});var s=r("../../../../node_modules/@babel/runtime/helpers/esm/extends.js"),n=r("../../../../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),o=r("../../../../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=r("../../../../node_modules/@babel/runtime/helpers/esm/createClass.js"),a=r("../../../../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),u=r("../../../../node_modules/@babel/runtime/helpers/esm/inherits.js"),c=r("../../../../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),l=r("../../../../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),d=r("../../../../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),p=r("../../../../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),m=r("../../../../node_modules/@babel/runtime/regenerator/index.js"),h=r.n(m),v=r("../../../../node_modules/react/index.js"),g=r("./app/actionCreators/group.tsx"),f=r("./app/actionCreators/indicator.tsx"),Z=r("./app/components/activity/author.tsx"),y=r("./app/components/activity/item/index.tsx"),_=r("./app/components/activity/note/index.tsx"),b=r("./app/components/activity/note/inputWithStorage.tsx"),x=r("./app/components/errorBoundary.tsx"),N=r("./app/components/reprocessedBox.tsx"),E=r("./app/constants/index.tsx"),S=r("./app/locale.tsx"),I=r("./app/stores/configStore.tsx"),k=r("./app/styles/space.tsx"),w=r("./app/types/index.tsx"),R=r("./app/utils/guid.tsx"),C=r("./app/utils/withApi.tsx"),U=r("./app/utils/withOrganization.tsx"),j=r("../../../../node_modules/@babel/runtime/helpers/esm/typeof.js"),B=r("./app/components/commitLink.tsx"),T=r("./app/components/duration.tsx"),O=r("./app/components/links/externalLink.tsx"),A=r("./app/components/links/link.tsx"),D=r("./app/components/pullRequestLink.tsx"),L=r("./app/components/version.tsx"),z=r("./app/stores/memberListStore.tsx"),G=r("./app/stores/teamStore.tsx"),$=r("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");function P(e){var t=e.activity,r=e.orgSlug,s=e.projectId,n=e.author,o="/organizations/".concat(r,"/issues/");return(0,$.tZ)(v.Fragment,null,function(){switch(t.type){case w.fc.NOTE:return(0,S._N)("[author] left a comment",{author:n});case w.fc.SET_RESOLVED:return(0,S._N)("[author] marked this issue as resolved",{author:n});case w.fc.SET_RESOLVED_BY_AGE:return(0,S._N)("[author] marked this issue as resolved due to inactivity",{author:n});case w.fc.SET_RESOLVED_IN_RELEASE:return t.data.version?(0,S._N)("[author] marked this issue as resolved in [version]",{author:n,version:(0,$.tZ)(L.Z,{version:t.data.version,projectId:s,tooltipRawVersion:!0})}):(0,S._N)("[author] marked this issue as resolved in the upcoming release",{author:n});case w.fc.SET_RESOLVED_IN_COMMIT:return(0,S._N)("[author] marked this issue as resolved in [version]",{author:n,version:(0,$.tZ)(B.Z,{inline:!0,commitId:t.data.commit.id,repository:t.data.commit.repository})});case w.fc.SET_RESOLVED_IN_PULL_REQUEST:var e=t.data.pullRequest;return(0,S._N)("[author] marked this issue as resolved in [version]",{author:n,version:(0,$.tZ)(D.Z,{inline:!0,pullRequest:e,repository:e.repository})});case w.fc.SET_UNRESOLVED:return(0,S._N)("[author] marked this issue as unresolved",{author:n});case w.fc.SET_IGNORED:return(Z=t.data).ignoreDuration?(0,S._N)("[author] ignored this issue for [duration]",{author:n,duration:(0,$.tZ)(T.Z,{seconds:60*Z.ignoreDuration})}):Z.ignoreCount&&Z.ignoreWindow?(0,S._N)("[author] ignored this issue until it happens [count] time(s) in [duration]",{author:n,count:Z.ignoreCount,duration:(0,$.tZ)(T.Z,{seconds:60*Z.ignoreWindow})}):Z.ignoreCount?(0,S._N)("[author] ignored this issue until it happens [count] time(s)",{author:n,count:Z.ignoreCount}):Z.ignoreUserCount&&Z.ignoreUserWindow?(0,S._N)("[author] ignored this issue until it affects [count] user(s) in [duration]",{author:n,count:Z.ignoreUserCount,duration:(0,$.tZ)(T.Z,{seconds:60*Z.ignoreUserWindow})}):Z.ignoreUserCount?(0,S._N)("[author] ignored this issue until it affects [count] user(s)",{author:n,count:Z.ignoreUserCount}):(0,S._N)("[author] ignored this issue",{author:n});case w.fc.SET_PUBLIC:return(0,S._N)("[author] made this issue public",{author:n});case w.fc.SET_PRIVATE:return(0,S._N)("[author] made this issue private",{author:n});case w.fc.SET_REGRESSION:var i=t.data;return i.version?(0,S._N)("[author] marked this issue as a regression in [version]",{author:n,version:(0,$.tZ)(L.Z,{version:i.version,projectId:s,tooltipRawVersion:!0})}):(0,S._N)("[author] marked this issue as a regression",{author:n});case w.fc.CREATE_ISSUE:var a=t.data;return(0,S._N)("[author] created an issue on [provider] titled [title]",{author:n,provider:a.provider,title:(0,$.tZ)(O.Z,{href:a.location},a.title)});case w.fc.UNMERGE_SOURCE:var u=t.data,c=u.destination,l=u.fingerprints;return(0,S.tn)("%2$s migrated %1$s fingerprint to %3$s","%2$s migrated %1$s fingerprints to %3$s",l.length,n,c?(0,$.tZ)(A.Z,{to:"".concat(o).concat(c.id)},c.shortId):(0,S.t)("a group"));case w.fc.UNMERGE_DESTINATION:var p=t.data,m=p.source,h=p.fingerprints;return(0,S.tn)("%2$s migrated %1$s fingerprint from %3$s","%2$s migrated %1$s fingerprints from %3$s",h.length,n,m?(0,$.tZ)(A.Z,{to:"".concat(o).concat(m.id)},m.shortId):(0,S.t)("a group"));case w.fc.FIRST_SEEN:return(0,S._N)("[author] first saw this issue",{author:n});case w.fc.ASSIGNED:return function(e){var r,s=void 0;if("team"===e.assigneeType){var o=G.Z.getById(e.assignee);return s=o?o.slug:"<unknown-team>",(0,S._N)("[author] assigned this issue to #[assignee]",{author:n,assignee:s})}return t.user&&t.assignee===t.user.id?(0,S._N)("[author] assigned this issue to themselves",{author:n}):(s=z.Z.getById(e.assignee),"object"===(0,j.Z)(s)&&null!==(r=s)&&void 0!==r&&r.email?(0,S._N)("[author] assigned this issue to [assignee]",{author:n,assignee:s.email}):(0,S._N)("[author] assigned this issue to an unknown user",{author:n}))}(t.data);case w.fc.UNASSIGNED:return(0,S._N)("[author] unassigned this issue",{author:n});case w.fc.MERGE:return(0,S.tn)("%2$s merged %1$s issue into this issue","%2$s merged %1$s issues into this issue",t.data.issues.length,n);case w.fc.REPROCESS:var v=t.data,g=v.oldGroupId,f=v.eventCount;return(0,S._N)("[author] reprocessed the events in this issue. [new-events]",(0,d.Z)({author:n},"new-events",(0,$.tZ)(A.Z,{to:"/organizations/".concat(r,"/issues/?query=reprocessing.original_issue_id:").concat(g)},(0,S.tn)("See %s new event","See %s new events",f))));case w.fc.MARK_REVIEWED:return(0,S._N)("[author] marked this issue as reviewed",{author:n});default:return""}var Z}())}P.displayName="GroupActivityItem";const V=P;var M=r("./app/views/organizationGroupDetails/utils.tsx");var q=function(e){(0,u.Z)(m,e);var t,r,p=(t=m,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,s=(0,l.Z)(t);if(r){var n=(0,l.Z)(this).constructor;e=Reflect.construct(s,arguments,n)}else e=s.apply(this,arguments);return(0,c.Z)(this,e)});function m(){var e;(0,o.Z)(this,m);for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return e=p.call.apply(p,[this].concat(r)),(0,d.Z)((0,a.Z)(e),"state",{createBusy:!1,error:!1,errorJSON:null,inputId:(0,R.E)()}),(0,d.Z)((0,a.Z)(e),"handleNoteDelete",function(){var t=(0,n.Z)(h().mark((function t(r){var s,n,o,i,a;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=r.modelId,n=r.text,o=e.props,i=o.api,a=o.group,(0,f.E3)((0,S.t)("Removing comment...")),t.prev=3,t.next=6,(0,g.f_)(i,a,s,n);case 6:(0,f.B8)(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),(0,f.Iw)((0,S.t)("Failed to delete comment"));case 12:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e){return t.apply(this,arguments)}}()),(0,d.Z)((0,a.Z)(e),"handleNoteCreate",function(){var t=(0,n.Z)(h().mark((function t(r){var s,n,o;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.props,n=s.api,o=s.group,e.setState({createBusy:!0}),(0,f.E3)((0,S.t)("Posting comment...")),t.prev=3,t.next=6,(0,g.kT)(n,o,r);case 6:e.setState({createBusy:!1,inputId:(0,R.E)()}),(0,f.B8)(),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(3),e.setState({createBusy:!1,error:!0,errorJSON:t.t0.responseJSON||E.N7}),(0,f.Iw)((0,S.t)("Unable to post comment"));case 14:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e){return t.apply(this,arguments)}}()),(0,d.Z)((0,a.Z)(e),"handleNoteUpdate",function(){var t=(0,n.Z)(h().mark((function t(r,s){var n,o,i,a,u;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.modelId,o=s.text,i=e.props,a=i.api,u=i.group,(0,f.E3)((0,S.t)("Updating comment...")),t.prev=3,t.next=6,(0,g.Qk)(a,u,r,n,o);case 6:(0,f.B8)(),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(3),e.setState({error:!0,errorJSON:t.t0.responseJSON||E.N7}),(0,f.Iw)((0,S.t)("Unable to update comment"));case 13:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e,r){return t.apply(this,arguments)}}()),e}return(0,i.Z)(m,[{key:"render",value:function(){var e=this,t=this.props,r=t.group,n=t.organization,o=r.activity,i=r.count,a=r.id,u=Number(i),c=(0,M.Ad)(o),l=(0,M.M3)(r,c),d=I.Z.get("user"),p=r&&r.project?[r.project.slug]:[],m={minHeight:140,group:r,projectSlugs:p,placeholder:(0,S.t)("Add details or updates to this event. \nTag users with @, or teams with #")};return(0,$.tZ)(v.Fragment,null,(l===M.m7.REPROCESSED_AND_HASNT_EVENT||l===M.m7.REPROCESSED_AND_HAS_EVENT)&&(0,$.tZ)(W,{reprocessActivity:c,groupCount:u,orgSlug:n.slug,groupId:a}),(0,$.tZ)("div",{className:"row"},(0,$.tZ)("div",{className:"col-md-9"},(0,$.tZ)("div",null,(0,$.tZ)(y.Z,{author:{type:"user",user:d}},(function(){return(0,$.tZ)(b.Z,(0,s.Z)({key:e.state.inputId,storageKey:"groupinput:latest",itemKey:r.id,onCreate:e.handleNoteCreate,busy:e.state.createBusy,error:e.state.error,errorJSON:e.state.errorJSON},m))})),r.activity.map((function(t){var o,i,a=t.user?t.user.name:"Sentry";return t.type===w.fc.NOTE?(0,$.tZ)(x.Z,{mini:!0,key:"note-".concat(t.id)},(0,$.tZ)(_.Z,(0,s.Z)({showTime:!1,text:t.data.text,modelId:t.id,user:t.user,dateCreated:t.dateCreated,authorName:a,onDelete:e.handleNoteDelete,onUpdate:e.handleNoteUpdate},m))):t.type!==w.fc.MARK_REVIEWED||null!=n&&null!==(o=n.features)&&void 0!==o&&o.includes("inbox")?(0,$.tZ)(x.Z,{mini:!0,key:"item-".concat(t.id)},(0,$.tZ)(y.Z,{author:{type:t.user?"user":"system",user:null!==(i=t.user)&&void 0!==i?i:void 0},date:t.dateCreated,header:(0,$.tZ)(V,{author:(0,$.tZ)(Z.Z,null,a),activity:t,orgSlug:e.props.params.orgId,projectId:r.project.id})})):null}))))))}}]),m}(v.Component);q.displayName="GroupActivity";const J=(0,C.Z)((0,U.Z)(q));var W=(0,p.Z)(N.Z,{target:"ergnc8n0",label:"StyledReprocessedBox"})("margin:-",(0,k.Z)(3)," -",(0,k.Z)(4)," ",(0,k.Z)(4)," -",(0,k.Z)(4),";z-index:1;")}}]);
//# sourceMappingURL=GroupActivity.js.map