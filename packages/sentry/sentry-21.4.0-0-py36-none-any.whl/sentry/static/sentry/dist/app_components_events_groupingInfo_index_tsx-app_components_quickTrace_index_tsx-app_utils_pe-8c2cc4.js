(self.webpackChunk=self.webpackChunk||[]).push([["app_components_events_groupingInfo_index_tsx-app_components_quickTrace_index_tsx-app_utils_pe-8c2cc4","app_components_events_groupingInfo_index_tsx"],{"./app/components/events/groupingInfo/index.tsx":(e,t,n)=>{"use strict";n.d(t,{B:()=>we,Z:()=>Oe});var r=n("../../../../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),o=n("../../../../node_modules/@babel/runtime/helpers/esm/createClass.js"),i=n("../../../../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),a=n("../../../../node_modules/@babel/runtime/helpers/esm/get.js"),s=n("../../../../node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("../../../../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),u=n("../../../../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=n("../../../../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),p=n("../../../../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),d=n("../../../../node_modules/react/index.js"),f=n("./app/components/asyncComponent.tsx"),m=n("./app/components/button.tsx"),g=n("./app/components/events/eventDataSection.tsx"),h=n("./app/components/loadingIndicator.tsx"),v=n("./app/locale.tsx"),y=n("./app/styles/space.tsx"),b=n("./app/utils/withOrganization.tsx"),Z=n("./app/components/dropdownAutoComplete/index.tsx"),x=n("./app/components/dropdownButton.tsx"),w=n("./app/components/tooltip.tsx"),j=n("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=function(e){(0,s.Z)(l,e);var t,n,i=(t=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,u.Z)(t);if(n){var o=(0,u.Z)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,c.Z)(this,e)});function l(){return(0,r.Z)(this,l),i.apply(this,arguments)}return(0,o.Z)(l,[{key:"getDefaultState",value:function(){return k(k({},(0,a.Z)((0,u.Z)(l.prototype),"getDefaultState",this).call(this)),{},{configs:[]})}},{key:"getEndpoints",value:function(){return[["configs","/grouping-configs/"]]}},{key:"renderLoading",value:function(){return this.renderBody()}},{key:"renderBody",value:function(){var e=this.props,t=e.configId,n=e.eventConfigId,r=e.onSelect,o=this.state.configs.map((function(e){var t=e.id,r=e.hidden;return{value:t,label:(0,j.tZ)(we,{isHidden:r,isActive:t===n},t)}}));return(0,j.tZ)(Z.Z,{onSelect:r,items:o},(function(e){var r=e.isOpen;return(0,j.tZ)(w.Z,{title:(0,v.t)("Click here to experiment with other grouping configs")},(0,j.tZ)(C,{isOpen:r,size:"small"},(0,j.tZ)(we,{isActive:n===t},t)))}))}}]),l}(f.Z),C=(0,p.Z)(x.Z,{target:"e10t66ir0",label:"StyledDropdownButton"})({name:"1qd1og9",styles:"font-weight:inherit;"});const S=_;var P=n("../../../../node_modules/@babel/runtime/helpers/esm/extends.js"),T=n("../../../../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),D=n("../../../../node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),I=n("../../../../node_modules/lodash/capitalize.js"),N=n.n(I),E=n("./app/components/buttonBar.tsx"),z=n("./app/components/events/interfaces/keyValueList.tsx"),A=n("./app/components/questionTooltip.tsx"),q=n("./app/icons/index.tsx"),R=n("./app/styles/overflowEllipsis.tsx"),G=n("./app/types/index.tsx"),F=n("../../../../node_modules/lodash/isObject.js"),M=n.n(F);function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function B(e){if(null==e||!e.contributes)return!0;var t,n=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return V(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(e.values);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(M()(r)&&B(r))return!0}}catch(e){n.e(e)}finally{n.f()}return!1}function L(e,t){if(M()(e)){if(!e.contributes&&!e.hint&&0===e.values.length)return!1;if(!t&&!e.contributes)return!1}return!0}var Q=function(e){var t=e.component,n=e.showNonContributing;return(0,j.tZ)(d.Fragment,null,t.values.filter((function(e){return L(e,n)})).map((function(e,r){return(0,j.tZ)(ee,{key:r},M()(e)?(0,j.tZ)(oe,{component:e,showNonContributing:n}):(0,j.tZ)(te,{valueType:t.name||t.id},"string"==typeof e||"number"==typeof e?e:JSON.stringify(e,null,2)))})))};Q.displayName="GroupingComponentChildren";const H=Q;var K=function(e){(0,s.Z)(p,e);var t,n,a=(t=p,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,u.Z)(t);if(n){var o=(0,u.Z)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,c.Z)(this,e)});function p(){var e;(0,r.Z)(this,p);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e=a.call.apply(a,[this].concat(n)),(0,l.Z)((0,i.Z)(e),"state",{collapsed:!0}),e}return(0,o.Z)(p,[{key:"render",value:function(){var e=this,t=this.props,n=t.items,r=t.maxVisibleItems,o=this.state.collapsed,i=n.length>r;return(0,j.tZ)(d.Fragment,null,n.map((function(t,a){return!o||a<r?(0,j.tZ)(ee,{isCollapsable:i,key:a},t):a===r?(0,j.tZ)(ee,{key:a},(0,j.tZ)(U,{size:"small",priority:"link",icon:(0,j.tZ)(q.N_,{size:"8px"}),onClick:function(){return e.setState({collapsed:!1})}},(0,v._N)("show [numberOfFrames] similiar",{numberOfFrames:n.length-r}))):null})),!o&&n.length>r&&(0,j.tZ)(ee,null,(0,j.tZ)(U,{size:"small",priority:"link",icon:(0,j.tZ)(q.JZ,{size:"8px"}),onClick:function(){return e.setState({collapsed:!0})}},(0,v._N)("collapse [numberOfFrames] similiar",{numberOfFrames:n.length-r}))))}}]),p}(d.Component);K.displayName="GroupingComponentFrames",(0,l.Z)(K,"defaultProps",{maxVisibleItems:2});var U=(0,p.Z)(m.ZP,{target:"e85hq7x0",label:"ToggleCollapse"})("margin:",(0,y.Z)(.5)," 0;");const W=K;var J=function(e){var t,n=e.component,r=e.showNonContributing;return(0,j.tZ)(d.Fragment,null,(t=[],n.values.filter((function(e){return L(e,r)})).forEach((function(e){var n=e.values.filter((function(e){return L(e,r)})).map((function(e){return e.id})).sort((function(e,t){return e.localeCompare(t)})).join(""),o=t[t.length-1];(null==o?void 0:o.key)===n?o.data.push(e):t.push({key:n,data:[e]})})),t).map((function(e,t){return(0,j.tZ)(W,{key:t,items:e.data.map((function(e,t){return(0,j.tZ)(oe,{key:t,component:e,showNonContributing:r})}))})})))};J.displayName="GroupingComponentStacktrace";const $=J;var Y=function(e){var t=e.component,n=e.showNonContributing,r=function(e){return e.values.every((function(e){return!M()(e)}))}(t),o="stacktrace"===t.id?$:H;return(0,j.tZ)(ne,{isContributing:t.contributes},(0,j.tZ)("span",null,t.name||t.id,t.hint&&(0,j.tZ)(re,null," (".concat(t.hint,")"))),(0,j.tZ)(X,{isInline:r},(0,j.tZ)(o,{component:t,showNonContributing:n})))};Y.displayName="GroupingComponent";var X=(0,p.Z)("ul",{target:"eg7fssn0",label:"GroupingComponentList"})("padding:0;margin:0;list-style:none;&,& > li{display:",(function(e){return e.isInline?"inline":"block"}),";}"),ee=(0,p.Z)("li",{target:"eg7fssn1",label:"GroupingComponentListItem"})("padding:0;margin:",(0,y.Z)(.25)," 0 ",(0,y.Z)(.25)," ",(0,y.Z)(1.5),";",(function(e){return e.isCollapsable&&"\n    border-left: 1px solid ".concat(e.theme.innerBorder,";\n    margin: 0 0 -").concat((0,y.Z)(.25)," ").concat((0,y.Z)(1),";\n    padding-left: ").concat((0,y.Z)(.5),";\n  ")})),te=(0,p.Z)("code",{target:"eg7fssn2",label:"GroupingValue"})("display:inline-block;margin:",(0,y.Z)(.25)," ",(0,y.Z)(.5)," ",(0,y.Z)(.25)," 0;font-size:",(function(e){return e.theme.fontSizeSmall}),";padding:0 ",(0,y.Z)(.25),";background:rgba(112,163,214,0.1);color:#4e3fb4;",(function(e){var t=e.valueType;return("function"===t||"symbol"===t)&&"\n    font-weight: bold;\n    color: #2c58a8;\n  "})),ne=(0,p.Z)("div",{target:"eg7fssn3",label:"GroupingComponentWrapper"})("color:",(function(e){return e.isContributing?null:e.theme.gray200}),";",te,",button{opacity:",(function(e){return e.isContributing?1:.6}),";}"),re=(0,p.Z)("small",{target:"eg7fssn4",label:"GroupingHint"})({name:"1lpx31t",styles:"font-size:0.8em;"});const oe=Y;function ie(e,t){t.matched_rule&&e.push([(0,v.t)("Fingerprint rule"),(0,j.tZ)(fe,{key:"type"},t.matched_rule,(0,j.tZ)(A.Z,{size:"xs",position:"top",title:(0,v.t)("The server-side fingerprinting rule that produced the fingerprint.")}))]),t.values&&e.push([(0,v.t)("Fingerprint values"),t.values]),t.client_values&&e.push([(0,v.t)("Client fingerprint values"),(0,j.tZ)(fe,{key:"type"},t.client_values,(0,j.tZ)(A.Z,{size:"xs",position:"top",title:(0,v.t)("The client sent a fingerprint that was overridden by a server-side fingerprinting rule.")}))])}var ae=function(e){(0,s.Z)(p,e);var t,n,a=(t=p,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,u.Z)(t);if(n){var o=(0,u.Z)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,c.Z)(this,e)});function p(){var e;(0,r.Z)(this,p);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e=a.call.apply(a,[this].concat(n)),(0,l.Z)((0,i.Z)(e),"state",{showNonContributing:!1}),(0,l.Z)((0,i.Z)(e),"handleShowNonContributing",(function(){e.setState({showNonContributing:!0})})),(0,l.Z)((0,i.Z)(e),"handleHideNonContributing",(function(){e.setState({showNonContributing:!1})})),e}return(0,o.Z)(p,[{key:"getVariantData",value:function(){var e,t,n,r=this.props,o=r.variant,i=r.showGroupingConfig,a=[];if(!this.state.showNonContributing&&null===o.hash)return[a,n];switch(null!==o.hash&&a.push([(0,v.t)("Hash"),(0,j.tZ)(fe,{key:"hash"},(0,j.tZ)(me,null,o.hash),(0,j.tZ)(A.Z,{size:"xs",position:"top",title:(0,v.t)("Events with the same hash are grouped together")}))]),o.hashMismatch&&a.push([(0,v.t)("Hash mismatch"),(0,v.t)("hashing algorithm produced a hash that does not match the event")]),o.type){case G.bo.COMPONENT:n=o.component,a.push([(0,v.t)("Type"),(0,j.tZ)(fe,{key:"type"},o.type,(0,j.tZ)(A.Z,{size:"xs",position:"top",title:(0,v.t)("Uses a complex grouping algorithm taking event data into account")}))]),i&&null!==(e=o.config)&&void 0!==e&&e.id&&a.push([(0,v.t)("Grouping Config"),o.config.id]);break;case G.bo.CUSTOM_FINGERPRINT:a.push([(0,v.t)("Type"),(0,j.tZ)(fe,{key:"type"},o.type,(0,j.tZ)(A.Z,{size:"xs",position:"top",title:(0,v.t)("Overrides the default grouping by a custom fingerprinting rule")}))]),ie(a,o);break;case G.bo.SALTED_COMPONENT:n=o.component,a.push([(0,v.t)("Type"),(0,j.tZ)(fe,{key:"type"},o.type,(0,j.tZ)(A.Z,{size:"xs",position:"top",title:(0,v.t)("Uses a complex grouping algorithm taking event data and a fingerprint into account")}))]),ie(a,o),i&&null!==(t=o.config)&&void 0!==t&&t.id&&a.push([(0,v.t)("Grouping Config"),o.config.id])}return n&&a.push([(0,v.t)("Grouping"),(0,j.tZ)(de,{key:n.id},(0,j.tZ)(oe,{component:n,showNonContributing:this.state.showNonContributing}))]),[a,n]}},{key:"renderTitle",value:function(){var e,t,n,r=this.props.variant,o=null!==r.hash;if(o)n=(0,v.t)("Contributing variant");else{var i,a=null===(i=r.component)||void 0===i?void 0:i.hint;n=a?(0,v.t)("Non-contributing variant: %s",a):(0,v.t)("Non-contributing variant")}return(0,j.tZ)(w.Z,{title:n},(0,j.tZ)(ue,null,(0,j.tZ)(le,{isContributing:o}),(0,v.t)("By")," ",null!==(e=null===(t=r.description)||void 0===t?void 0:t.split(" ").map((function(e){return N()(e)})).join(" "))&&void 0!==e?e:(0,v.t)("Nothing")))}},{key:"renderContributionToggle",value:function(){var e=this.state.showNonContributing;return(0,j.tZ)(pe,{merged:!0,active:e?"all":"relevant"},(0,j.tZ)(m.ZP,{barId:"relevant",size:"xsmall",onClick:this.handleHideNonContributing},(0,v.t)("Contributing values")),(0,j.tZ)(m.ZP,{barId:"all",size:"xsmall",onClick:this.handleShowNonContributing},(0,v.t)("All values")))}},{key:"render",value:function(){var e=this.getVariantData(),t=(0,D.Z)(e,2),n=t[0],r=t[1];return(0,j.tZ)(se,null,(0,j.tZ)(ce,null,this.renderTitle(),B(r)&&this.renderContributionToggle()),(0,j.tZ)(z.Z,{data:n.map((function(e){return{key:e[0],subject:e[0],value:e[1]}})),isContextData:!0,isSorted:!1}))}}]),p}(d.Component);ae.displayName="GroupVariant";var se=(0,p.Z)("div",{target:"e1o15qc80",label:"VariantWrapper"})("margin-bottom:",(0,y.Z)(4),";"),ce=(0,p.Z)("div",{target:"e1o15qc81",label:"Header"})("display:flex;align-items:center;justify-content:space-between;margin-bottom:",(0,y.Z)(2),";@media (max-width:",(function(e){return e.theme.breakpoints[0]}),"){display:block;}"),ue=(0,p.Z)("h5",{target:"e1o15qc82",label:"VariantTitle"})("font-size:",(function(e){return e.theme.fontSizeMedium}),";margin:0;display:flex;align-items:center;"),le=(0,p.Z)((function(e){var t=e.isContributing,n=(0,T.Z)(e,["isContributing"]);return t?(0,j.tZ)(q.DL,(0,P.Z)({size:"sm",isCircled:!0,color:"green300"},n)):(0,j.tZ)(q.bM,(0,P.Z)({size:"sm",isCircled:!0,color:"red"},n))}),{target:"e1o15qc83",label:"ContributionIcon"})("margin-right:",(0,y.Z)(1),";"),pe=(0,p.Z)(E.Z,{target:"e1o15qc84",label:"ContributingToggle"})("justify-content:flex-end;@media (max-width:",(function(e){return e.theme.breakpoints[0]}),"){margin-top:",(0,y.Z)(.5),";}"),de=(0,p.Z)("div",{target:"e1o15qc85",label:"GroupingTree"})({name:"1lujcy7",styles:"color:#2f2936;"}),fe=(0,p.Z)("div",{target:"e1o15qc86",label:"TextWithQuestionTooltip"})("display:grid;align-items:center;grid-template-columns:max-content min-content;grid-gap:",(0,y.Z)(.5),";"),me=(0,p.Z)("span",{target:"e1o15qc87",label:"Hash"})("@media (max-width:",(function(e){return e.theme.breakpoints[0]}),"){",R.Z,";width:210px;}");const ge=ae;function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ye=function(e){(0,s.Z)(f,e);var t,n,p=(t=f,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,u.Z)(t);if(n){var o=(0,u.Z)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,c.Z)(this,e)});function f(){var e;(0,r.Z)(this,f);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e=p.call.apply(p,[this].concat(n)),(0,l.Z)((0,i.Z)(e),"toggle",(function(){e.setState((function(e){return{isOpen:!e.isOpen,configOverride:e.isOpen?null:e.configOverride}}))})),(0,l.Z)((0,i.Z)(e),"handleConfigSelect",(function(t){e.setState({configOverride:t.value},(function(){return e.reloadData()}))})),e}return(0,o.Z)(f,[{key:"getEndpoints",value:function(){var e,t=this.props,n=t.organization,r=t.event,o=t.projectId,i="/projects/".concat(n.slug,"/").concat(o,"/events/").concat(r.id,"/grouping-info/");return null!==(e=this.state)&&void 0!==e&&e.configOverride&&(i="".concat(i,"?config=").concat(this.state.configOverride)),[["groupInfo",i]]}},{key:"getDefaultState",value:function(){return ve(ve({},(0,a.Z)((0,u.Z)(f.prototype),"getDefaultState",this).call(this)),{},{isOpen:!1,configOverride:null})}},{key:"renderGroupInfoSummary",value:function(){var e=this.state.groupInfo;if(!e)return null;var t=Object.values(e).filter((function(e){return null!==e.hash&&null!==e.description})).map((function(e){return e.description})).sort((function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())})).join(", ");return(0,j.tZ)(be,{"data-test-id":"loaded-grouping-info"},"(".concat((0,v.t)("grouped by")," ").concat(t||(0,v.t)("nothing"),")"))}},{key:"renderGroupConfigSelect",value:function(){var e=this.state.configOverride,t=this.props.event,n=null!=e?e:t.groupingConfig.id;return(0,j.tZ)(xe,null,(0,j.tZ)(S,{eventConfigId:t.groupingConfig.id,configId:n,onSelect:this.handleConfigSelect}))}},{key:"renderGroupInfo",value:function(){var e=this.state,t=e.groupInfo,n=e.loading,r=this.props.showGroupingConfig,o=t?Object.values(t).sort((function(e,t){var n,r,o,i;return e.hash&&!t.hash?-1:null!==(n=null===(r=e.description)||void 0===r?void 0:r.toLowerCase().localeCompare(null!==(o=null===(i=t.description)||void 0===i?void 0:i.toLowerCase())&&void 0!==o?o:""))&&void 0!==n?n:1})):[];return(0,j.tZ)(d.Fragment,null,r&&this.renderGroupConfigSelect(),n?(0,j.tZ)(h.Z,null):o.map((function(e,t){return(0,j.tZ)(d.Fragment,{key:e.key},(0,j.tZ)(ge,{variant:e,showGroupingConfig:r}),t<o.length-1&&(0,j.tZ)(je,null))})))}},{key:"renderLoading",value:function(){return this.renderBody()}},{key:"renderBody",value:function(){var e=this.state.isOpen,t=(0,j.tZ)(d.Fragment,null,(0,v.t)("Event Grouping Information"),!e&&this.renderGroupInfoSummary()),n=(0,j.tZ)(Ze,{onClick:this.toggle,priority:"link"},e?(0,v.t)("Hide Details"):(0,v.t)("Show Details"));return(0,j.tZ)(g.Z,{type:"grouping-info",title:t,actions:n},e&&this.renderGroupInfo())}}]),f}(f.Z),be=(0,p.Z)("small",{target:"e1wq4mnb0",label:"SummaryGroupedBy"})("@media (max-width:",(function(e){return e.theme.breakpoints[0]}),"){display:block;margin:0 !important;}"),Ze=(0,p.Z)(m.ZP,{target:"e1wq4mnb1",label:"ToggleButton"})("font-weight:700;color:",(function(e){return e.theme.subText}),";&:hover,&:focus{color:",(function(e){return e.theme.textColor}),";}"),xe=(0,p.Z)("div",{target:"e1wq4mnb2",label:"GroupConfigWrapper"})("margin-bottom:",(0,y.Z)(1.5),";margin-top:-",(0,y.Z)(1),";"),we=(0,p.Z)("span",{target:"e1wq4mnb3",label:"GroupingConfigItem"})("font-family:",(function(e){return e.theme.text.familyMono}),";opacity:",(function(e){return e.isHidden?.5:null}),";font-weight:",(function(e){return e.isActive?"bold":null}),";font-size:",(function(e){return e.theme.fontSizeSmall}),";"),je=(0,p.Z)("hr",{target:"e1wq4mnb4",label:"VariantDivider"})("padding-top:",(0,y.Z)(1),";");const Oe=(0,b.Z)(ye)},"./app/components/quickTrace/index.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>J});var r=n("../../../../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),o=n("../../../../node_modules/@babel/runtime/helpers/esm/createClass.js"),i=n("../../../../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),a=n("../../../../node_modules/@babel/runtime/helpers/esm/inherits.js"),s=n("../../../../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),c=n("../../../../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),u=n("../../../../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),l=n("../../../../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),p=n("../../../../node_modules/react/index.js"),d=n("../../../../node_modules/react-router/es/index.js"),f=n("./app/components/dropdownLink.tsx"),m=n("./app/components/idBadge/projectBadge.tsx"),g=n("./app/components/quickTrace/utils.tsx"),h=n("./app/components/tooltip.tsx"),v=n("./app/data/platformCategories.tsx"),y=n("./app/icons/index.tsx"),b=n("./app/locale.tsx"),Z=n("./app/utils/analytics.tsx"),x=n("./app/utils/formatters.tsx"),w=n("./app/utils/localStorage.tsx"),j=n("./app/utils/performance/quickTrace/utils.tsx"),O=n("./app/utils/projects.tsx"),k=n("../../../../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),_=n("./app/components/links/externalLink.tsx"),C=n("./app/components/menuItem.tsx"),S=n("./app/components/tag.tsx"),P=n("./app/components/truncate.tsx"),T=n("./app/styles/space.tsx"),D=n("../../../../node_modules/@emotion/core/dist/core.browser.esm.js"),I=(0,k.Z)("div",{target:"esxo4vt0",label:"SectionSubtext"})("color:",(function(e){return"error"===e.type?e.theme.error:e.theme.subText}),";font-size:",(function(e){return e.theme.fontSizeMedium}),";"),N=(0,k.Z)("div",{target:"esxo4vt1",label:"QuickTraceContainer"})({name:"ci1l7n",styles:"display:flex;align-items:center;height:24px;"}),E=function(e){return{error:{color:e.white,background:e.red300,border:e.red300},warning:{color:e.red300,background:e.background,border:e.red300},white:{color:e.textColor,background:e.background,border:e.textColor},black:{color:e.background,background:e.textColor,border:e.textColor}}},z=(0,k.Z)(S.Z,{target:"esxo4vt2",label:"EventNode"})("span{display:flex;color:",(function(e){return E(e.theme)[e.type||"white"].color}),";}& ",S.A,"{background-color:",(function(e){return E(e.theme)[e.type||"white"].background}),";border:1px solid ",(function(e){return E(e.theme)[e.type||"white"].border}),";}"),A=(0,k.Z)("div",{target:"esxo4vt3",label:"TraceConnector"})("width:",(0,T.Z)(1),";border-top:1px solid ",(function(e){return e.theme.textColor}),";"),q=(0,k.Z)(C.Z,{target:"esxo4vt4",label:"StyledMenuItem"})("border-top:",(function(e){return e.first?null:"1px solid ".concat(e.theme.innerBorder)}),";width:",(function(e){return"large"===e.width?"350px":"200px"}),";"),R=(0,k.Z)("div",{target:"esxo4vt5",label:"MenuItemContent"})({name:"z7mtfw",styles:"display:flex;justify-content:space-between;width:100%;"});function G(e){var t=e.children,n=e.first,r=e.onSelect,o=e.to,i=e.width,a=void 0===i?"large":i;return(0,D.tZ)(q,{to:o,onSelect:r,first:n,width:a},(0,D.tZ)(R,null,t))}G.displayName="DropdownItem";var F=(0,k.Z)("div",{target:"esxo4vt6",label:"DropdownItemSubContainer"})({name:"1l9yxva",styles:"display:flex;flex-direction:row;> a{padding-left:0 !important;}"}),M=(0,k.Z)(P.Z,{target:"esxo4vt7",label:"StyledTruncate"})({name:"epvm6",styles:"white-space:nowrap;"}),V=(0,k.Z)("div",{target:"esxo4vt8",label:"ErrorNodeContent"})("display:grid;grid-template-columns:repeat(2,auto);grid-gap:",(0,T.Z)(.25),";align-items:center;"),B=(0,k.Z)(_.Z,{target:"esxo4vt9",label:"ExternalDropdownLink"})("display:inherit !important;padding:0 !important;color:",(function(e){return e.theme.textColor}),";&:hover{color:",(function(e){return e.theme.textColor}),";}");function L(e){var t=e.event;return(0,D.tZ)("div",null,(0,D.tZ)(P.Z,{value:t.transaction,maxLength:30,leftTrim:!0,trimRegex:/\.|\//g,expandable:!1}),(0,D.tZ)("div",null,(0,x.g9)(t["transaction.duration"]/1e3,t["transaction.duration"]<1e3?0:2,!0)))}function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}L.displayName="SingleEventHoverText";var K=(0,l.Z)(v.tQ),U=(0,l.Z)(v.y3),W={root:"root",ancestors:"ancestor",parent:"parent",current:"",children:"child",descendants:"descendant"};function J(e){var t,n=e.event,r=e.quickTrace,o=e.location,i=e.organization,a=e.anchor,s=e.errorDest,c=e.transactionDest;try{t=(0,j.R8)(r,n)}catch(e){return(0,D.tZ)(p.Fragment,null,"—")}var u=r.trace&&r.trace.length,l=t,d=l.root,f=l.ancestors,m=l.parent,h=l.children,v=l.descendants,y=l.current,Z=[];d&&(Z.push((0,D.tZ)(Y,{key:"root-node",location:o,organization:i,events:[d],text:(0,b.t)("Root"),anchor:a,nodeKey:"root",errorDest:s,transactionDest:c})),Z.push((0,D.tZ)(A,{key:"root-connector"}))),null!=f&&f.length&&(Z.push((0,D.tZ)(Y,{key:"ancestors-node",location:o,organization:i,events:f,text:(0,b.tn)("%s Ancestor","%s Ancestors",f.length),extrasTarget:(0,g.Y5)(n,f,i,"Ancestor"),anchor:a,nodeKey:"ancestors",errorDest:s,transactionDest:c})),Z.push((0,D.tZ)(A,{key:"ancestors-connector"}))),m&&(Z.push((0,D.tZ)(Y,{key:"parent-node",location:o,organization:i,events:[m],text:(0,b.t)("Parent"),anchor:a,nodeKey:"parent",errorDest:s,transactionDest:c})),Z.push((0,D.tZ)(A,{key:"parent-connector"})));var x=(0,D.tZ)(Y,{key:"current-node",location:o,organization:i,text:(0,b.t)("This Event"),events:[y],currentEvent:n,anchor:a,nodeKey:"current",errorDest:s,transactionDest:c});return 1===u?Z.push((0,D.tZ)(O.Z,{key:"missing-services",orgId:i.slug,slugs:[y.project_slug]},(function(e){var t=e.projects.find((function(e){return e.slug===y.project_slug}));if(null!=t&&t.platform){if(U.includes(t.platform))return(0,D.tZ)(p.Fragment,null,(0,D.tZ)(oe,{anchor:a,organization:i,platform:t.platform,connectorSide:"right"}),x);if(K.includes(t.platform))return(0,D.tZ)(p.Fragment,null,x,(0,D.tZ)(oe,{anchor:a,organization:i,platform:t.platform,connectorSide:"left"}))}return x}))):Z.push(x),h.length&&(Z.push((0,D.tZ)(A,{key:"children-connector"})),Z.push((0,D.tZ)(Y,{key:"children-node",location:o,organization:i,events:h,text:(0,b.tn)("%s Child","%s Children",h.length),extrasTarget:(0,g.Y5)(n,h,i,"Children"),anchor:a,nodeKey:"children",errorDest:s,transactionDest:c}))),null!=v&&v.length&&(Z.push((0,D.tZ)(A,{key:"descendants-connector"})),Z.push((0,D.tZ)(Y,{key:"descendants-node",location:o,organization:i,events:v,text:(0,b.tn)("%s Descendant","%s Descendants",v.length),extrasTarget:(0,g.Y5)(n,v,i,"Descendant"),anchor:a,nodeKey:"descendants",errorDest:s,transactionDest:c}))),(0,D.tZ)(N,null,Z)}function $(e,t,n,r){(0,Z.ec)({eventKey:"quick_trace.dropdown.clicked"+(r?"_extra":""),eventName:"Quick Trace: Dropdown clicked",organization_id:parseInt(n.id,10),node_key:t}),d.browserHistory.push(e)}function Y(e){var t=e.location,n=e.organization,r=e.events,o=void 0===r?[]:r,i=e.text,a=e.currentEvent,s=e.extrasTarget,c=e.nodeKey,u=e.anchor,l=e.errorDest,p=e.transactionDest,d=e.numEvents,m=void 0===d?5:d,h=[];o.forEach((function(e){var t;null==e||null===(t=e.errors)||void 0===t||t.forEach((function(t){a&&a.id===t.event_id||h.push(H(H({},t),{},{transaction:e.transaction}))}))})),o=a?o.filter((function(e){return e.event_id!==a.id})):o;var v="current"===c?"black":"white";if((h.length>0||a&&"transaction"!==(null==a?void 0:a.type))&&(v="current"===c?"error":"warning",i=(0,D.tZ)(V,null,(0,D.tZ)(y.zC,{size:"xs"}),i)),o.length+h.length===0)return(0,D.tZ)(z,{type:v},i);if(o.length+h.length===1){var w=h.length?(0,b.t)("View the error for this Transaction"):(0,D.tZ)(L,{event:o[0]}),j=h.length?(0,g.Tn)(h[0],n,t,l):(0,g.MV)(o[0],n,t,p);return(0,D.tZ)(ee,{text:i,hoverText:w,to:j,onClick:function(){return function(e,t){(0,Z.ec)({eventKey:"quick_trace.node.clicked",eventName:"Quick Trace: Node clicked",organization_id:parseInt(t.id,10),node_key:e})}(c,n)},type:v})}var O=(0,b._N)("View [eventPrefix] [eventType]",{eventPrefix:W[c],eventType:h.length&&o.length?"events":o.length?"transactions":"errors"});return(0,D.tZ)(f.Z,{caret:!1,title:(0,D.tZ)(ee,{text:i,hoverText:O,type:v}),anchorRight:"right"===u},h.slice(0,m).map((function(e,r){var o=(0,g.Tn)(e,n,t,l);return(0,D.tZ)(X,{key:e.event_id,event:e,onSelect:function(){return $(o,c,n,!1)},first:0===r,organization:n,subtext:"error",subtextType:"error",anchor:u})})),o.slice(0,m).map((function(e,r){var o=(0,g.MV)(e,n,t,p);return(0,D.tZ)(X,{key:e.event_id,event:e,onSelect:function(){return $(o,c,n,!1)},first:0===r&&0===h.length,organization:n,subtext:(0,x.g9)(e["transaction.duration"]/1e3,e["transaction.duration"]<1e3?0:2,!0),subtextType:"default",anchor:u})})),o.length>m&&O&&s&&(0,D.tZ)(G,{onSelect:function(){return $(s,c,n,!0)}},O))}function X(e){var t=e.event,n=e.onSelect,r=e.first,o=e.organization,i=e.subtext,a=e.subtextType,s=e.anchor;return(0,D.tZ)(G,{onSelect:n,first:r},(0,D.tZ)(F,null,(0,D.tZ)(O.Z,{orgId:o.slug,slugs:[t.project_slug]},(function(e){var n=e.projects.find((function(e){return e.slug===t.project_slug}));return(0,D.tZ)(m.Z,{hideName:!0,project:n||{slug:t.project_slug},avatarSize:16})})),(0,D.tZ)(M,{value:t.transaction,expandDirection:"left"===s?"right":"left",maxLength:35,leftTrim:!0,trimRegex:/\.|\//g})),(0,D.tZ)(I,{type:a},i))}function ee(e){var t=e.text,n=e.hoverText,r=e.to,o=e.onClick,i=e.type,a=void 0===i?"white":i;return(0,D.tZ)(h.Z,{position:"top",containerDisplayMode:"inline-flex",title:n},(0,D.tZ)(z,{type:a,icon:null,to:r,onClick:o},t))}J.displayName="QuickTrace",X.displayName="DropdownNodeItem",ee.displayName="StyledEventNode";var te="quick-trace:hide-missing-services",ne=2592e6;function re(){var e=w.Z.getItem(te);return null!==e&&parseInt(e,10)>(new Date).getTime()}var oe=function(e){(0,a.Z)(d,e);var t,n,l=(t=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,c.Z)(t);if(n){var o=(0,c.Z)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,s.Z)(this,e)});function d(){var e;(0,r.Z)(this,d);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e=l.call.apply(l,[this].concat(n)),(0,u.Z)((0,i.Z)(e),"state",{hideMissing:re()}),(0,u.Z)((0,i.Z)(e),"dismissMissingService",(function(){var t=e.props,n=t.organization,r=t.platform,o=(new Date).getTime();w.Z.setItem(te,(o+ne).toString()),e.setState({hideMissing:!0}),(0,Z.ec)({eventKey:"quick_trace.missing_service.dismiss",eventName:"Quick Trace: Missing Service Dismissed",organization_id:parseInt(n.id,10),platform:r})})),(0,u.Z)((0,i.Z)(e),"trackExternalLink",(function(){var t=e.props,n=t.organization,r=t.platform;(0,Z.ec)({eventKey:"quick_trace.missing_service.docs",eventName:"Quick Trace: Missing Service Clicked",organization_id:parseInt(n.id,10),platform:r})})),e}return(0,o.Z)(d,[{key:"render",value:function(){var e=this.state.hideMissing,t=this.props,n=t.anchor,r=t.connectorSide;return e?null:(0,D.tZ)(p.Fragment,null,"left"===r&&(0,D.tZ)(A,null),(0,D.tZ)(f.Z,{caret:!1,title:(0,D.tZ)(z,{type:"white"},"???"),anchorRight:"right"===n},(0,D.tZ)(G,{first:!0,width:"small"},(0,D.tZ)(B,{href:"https://docs.sentry.io/platforms/javascript/performance/connect-services/",onClick:this.trackExternalLink},(0,b.t)("Connect to a service"))),(0,D.tZ)(G,{onSelect:this.dismissMissingService,width:"small"},(0,b.t)("Dismiss"))),"right"===r&&(0,D.tZ)(A,null))}}]),d}(p.Component);oe.displayName="MissingServiceNode"},"./app/components/quickTrace/utils.tsx":(e,t,n)=>{"use strict";n.d(t,{F7:()=>m,Tn:()=>h,MV:()=>v,Y5:()=>y,aV:()=>b});var r=n("../../../../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=n("../../../../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),i=n("./app/components/organizations/globalSelectionHeader/getParams.tsx"),a=n("./app/constants/globalSelectionHeader.tsx"),s=n("./app/utils/discover/eventView.tsx"),c=n("./app/utils/discover/urls.tsx"),u=n("./app/utils/performance/quickTrace/utils.tsx"),l=n("./app/utils/tokenizeSearch.tsx"),p=n("./app/views/performance/traceDetails/utils.tsx"),d=n("./app/views/performance/utils.tsx");function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e,t){return"/organizations/".concat(t.slug,"/issues/").concat(e.issue_id,"/events/").concat(e.event_id)}function g(e,t,n){var r=(0,c.JE)({id:e.event_id,project:e.project_slug});return(0,c.eQ)({orgSlug:t.slug,eventSlug:r,eventView:s.ZP.fromLocation(n)})}function h(e,t,n,r){switch(r){case"issue":return m(e,t);case"discover":default:return g(e,t,n)}}function v(e,t,n,r){switch(r){case"performance":return function(e,t,n){var r=(0,c.JE)({id:e.event_id,project:e.project_slug});return(0,d.DD)(t,r,e.transaction,n.query)}(e,t,n);case"discover":default:return g(e,t,n)}}function y(e,t,n,r){for(var i=new l.an([]),a=t.map((function(e){return e.event_id})),c=0;c<a.length;c++)i.addOp(0===c?"(":"OR"),i.addQuery("id:".concat(a[c])),c===a.length-1&&i.addOp(")");var p=(0,u.$J)(e),d=p.start,f=p.end;return s.ZP.fromSavedQuery({id:void 0,name:"".concat(r," Transactions of Event ID ").concat(e.id),fields:["transaction","project","trace.span","transaction.duration","timestamp"],orderby:"-timestamp",query:(0,l.gZ)(i),projects:(0,o.Z)(new Set(t.map((function(e){return e.project_id})))),version:2,start:d,end:f}).getResultsViewUrlTarget(n.slug)}function b(e,t){var n,o,c,l=null!==(n=null===(o=e.contexts)||void 0===o||null===(c=o.trace)||void 0===c?void 0:c.trace_id)&&void 0!==n?n:"",d=(0,i.Q)((0,u.$J)(e));return t.features.includes("trace-view-summary")?(0,p.YA)(t,l,d,{}):s.ZP.fromSavedQuery(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:void 0,name:"Transactions with Trace ID ".concat(l),fields:["transaction","project","trace.span","transaction.duration","timestamp"],orderby:"-timestamp",query:"event.type:transaction trace:".concat(l),projects:[a.mP],version:2},d)).getResultsViewUrlTarget(t.slug)}},"./app/utils/performance/quickTrace/quickTraceQuery.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>Z});var r=n("../../../../node_modules/@babel/runtime/helpers/esm/extends.js"),o=n("../../../../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=n("../../../../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),a=n("../../../../node_modules/react/index.js"),s=n("./app/utils/performance/quickTrace/traceFullQuery.tsx"),c=n("./app/utils/discover/genericDiscoverQuery.tsx"),u=n("./app/utils/performance/quickTrace/utils.tsx"),l=n("./app/utils/withApi.tsx"),p=n("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){var t=e.eventId,n=(0,i.Z)(e,["eventId"]),r=(0,u.eF)(n);return Object.assign({event_id:t},r)}function m(e){var t=e.children;return(0,p.tZ)(a.Fragment,null,t({isLoading:!1,error:null,trace:null,type:"partial"}))}function g(e){var t=e.traceId,n=e.start,a=e.end,s=e.statsPeriod,l=e.children,g=(0,i.Z)(e,["traceId","start","end","statsPeriod","children"]);if(!t)return(0,p.tZ)(m,null,l);var h=(0,u._Z)({start:n,end:a,statsPeriod:s});return(0,p.tZ)(c.Z,(0,r.Z)({route:"events-trace-light/".concat(t),getRequestPayload:f,beforeFetch:u.VP,eventView:h},g),(function(e){var t=e.tableData,n=(0,i.Z)(e,["tableData"]);return l(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({trace:t||null,type:"partial"},n))}))}m.displayName="EmptyTrace",g.displayName="TraceLiteQuery";const h=(0,l.Z)(g);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Z(e){var t,n,o=e.children,c=e.event,l=(0,i.Z)(e,["children","event"]),d=null===(t=c.contexts)||void 0===t||null===(n=t.trace)||void 0===n?void 0:n.trace_id;if(!d)return(0,p.tZ)(a.Fragment,null,o({isLoading:!1,error:null,trace:[],type:"empty"}));var f=(0,u.$J)(c),m=f.start,g=f.end;return(0,p.tZ)(h,(0,r.Z)({eventId:c.id,traceId:d,start:m,end:g},l),(function(e){return(0,p.tZ)(s.g,(0,r.Z)({traceId:d,start:m,end:g},l),(function(t){var n;if(!t.isLoading&&null===t.error&&null!==t.traces){var r,i=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(t.traces);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{var s=(0,u.eW)(c,a);return o(y(y({},t),{},{trace:s}))}catch(e){}}}catch(e){i.e(e)}finally{i.f()}}return e.isLoading||null!==e.error||null===e.trace?o({isLoading:t.isLoading||e.isLoading,error:null!==(n=t.error)&&void 0!==n?n:e.error,trace:[],type:"empty"}):o(e)}))}))}Z.displayName="QuickTraceQuery"},"./app/utils/performance/quickTrace/traceFullQuery.tsx":(e,t,n)=>{"use strict";n.d(t,{g:()=>g,H:()=>h});var r=n("../../../../node_modules/@babel/runtime/helpers/esm/extends.js"),o=n("../../../../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=n("../../../../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),a=n("../../../../node_modules/react/index.js"),s=n("./app/utils/discover/genericDiscoverQuery.tsx"),c=n("./app/utils/performance/quickTrace/utils.tsx"),u=n("./app/utils/withApi.tsx"),l=n("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){var t=e.detailed,n=(0,i.Z)(e,["detailed"]),r=(0,c.eF)(n);return r.detailed=t?"1":"0",r}function f(e){var t=e.children;return(0,l.tZ)(a.Fragment,null,t({isLoading:!1,error:null,traces:null,type:"full"}))}function m(e){var t=e.traceId,n=e.start,a=e.end,u=e.statsPeriod,m=e.children,g=(0,i.Z)(e,["traceId","start","end","statsPeriod","children"]);if(!t)return(0,l.tZ)(f,null,m);var h=(0,c._Z)({start:n,end:a,statsPeriod:u});return(0,l.tZ)(s.Z,(0,r.Z)({route:"events-trace/".concat(t),getRequestPayload:d,beforeFetch:c.VP,eventView:h},g),(function(e){var t=e.tableData,n=(0,i.Z)(e,["tableData"]);return m(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({traces:t||null,type:"full"},n))}))}f.displayName="EmptyTrace",m.displayName="GenericTraceFullQuery";var g=(0,u.Z)((function(e){return(0,l.tZ)(m,(0,r.Z)({},e,{detailed:!1}))})),h=(0,u.Z)((function(e){return(0,l.tZ)(m,(0,r.Z)({},e,{detailed:!0}))}))},"./app/utils/performance/quickTrace/utils.tsx":(e,t,n)=>{"use strict";n.d(t,{hp:()=>p,eW:()=>f,R8:()=>g,VP:()=>v,eF:()=>y,_Z:()=>b,$J:()=>Z,S2:()=>x,xB:()=>w});var r=n("../../../../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),o=n("../../../../node_modules/lodash/omit.js"),i=n.n(o),a=n("./app/components/events/interfaces/spans/utils.tsx"),s=n("./app/constants/globalSelectionHeader.tsx"),c=n("./app/utils/discover/eventView.tsx");function u(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){throw e})),f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){s=!0,i=e})),f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e){return"transaction"===e.type}function d(e,t){return p(t)?e.event_id===t.id:void 0!==e.errors&&e.errors.some((function(e){return e.event_id===t.id}))}function f(e,t){for(var n=[],o=[],i=[{event:t,path:[]}];i.length;){var a=i.shift();if(d(a.event,e)){var s,c=u(a.path);try{for(c.s();!(s=c.n()).done;){var l=s.value;n.push(l)}}catch(e){c.e(e)}finally{c.f()}o.push(a.event)}else{var p,f=[].concat((0,r.Z)(a.path),[m(a.event)]),g=u(a.event.children);try{for(g.s();!(p=g.n()).done;){var h=p.value;i.push({event:h,path:f})}}catch(e){g.e(e)}finally{g.f()}}}if(!o.length)throw new Error("No relevant path exists!");for(;o.length;){var v,y=o.shift(),b=u(y.children);try{for(b.s();!(v=b.n()).done;){var Z=v.value;o.push(Z)}}catch(e){b.e(e)}finally{b.f()}n.push(m(y))}return n}function m(e){return i()(e,["children"])}function g(e,t){var n,r,o,i=e.type,a=e.trace;if("empty"===i||null===a)throw new Error("Current event not in quick trace!");var s="full"===i,c=null!==(n=a.find((function(e){return d(e,t)})))&&void 0!==n?n:null;if(null===c)throw new Error("Current event not in quick trace!");var u=c.parent_event_id&&null!==(r=a.find((function(e){return e.event_id===c.parent_event_id})))&&void 0!==r?r:null,l=null!==(o=a.find((function(e){return e.event_id!==c.event_id&&e.event_id!==(null==u?void 0:u.event_id)&&0===e.generation})))&&void 0!==o?o:null,p=s?[]:null,f=[],m=s?[]:null;return a.forEach((function(e){!function(e){return e.parent_event_id===c.event_id}(e)?s&&(function(e){return null!==c.generation&&null!==e.generation&&e.generation>0&&c.generation-1>e.generation}(e)?null==p||p.push(e):function(e){return null!==c.generation&&null!==e.generation&&c.generation+1<e.generation}(e)&&(null==m||m.push(e))):f.push(e)})),{root:l,ancestors:null===p?null:h(p),parent:u,current:c,children:h(f),descendants:null===m?null:h(m)}}function h(e){return e.sort((function(e,t){return t["transaction.duration"]-e["transaction.duration"]}))}function v(e){e.clear()}function y(e){var t=e.eventView,n=e.location;return i()(t.getEventsAPIPayload(n),["field","sort","per_page"])}function b(e){var t=e.start,n=e.end,r=e.statsPeriod;return c.ZP.fromSavedQuery({id:void 0,version:2,name:"",fields:["transaction.duration"],projects:[s.mP],query:"",environment:[],start:t,end:n,range:r})}function Z(e){var t=p(e)?e.startTimestamp:new Date(e.dateCreated).getTime()/1e3,n=p(e)?e.endTimestamp:t;return(0,a.TC)({start:t,end:n})}function x(e,t,n){for(var r=n,o=[e];o.length;){var i,a=o.pop(),s=u(a.children);try{for(s.s();!(i=s.n()).done;){var c=i.value;o.push(c)}}catch(e){s.e(e)}finally{s.f()}r=t(r,a)}return r}function w(e,t){return x(e,(function(e,n){return t(n)&&e.push(n),e}),[])}},"./app/views/performance/traceDetails/utils.tsx":(e,t,n)=>{"use strict";n.d(t,{YA:()=>p,Rg:()=>d,Ci:()=>f,ud:()=>a.ud,bQ:()=>s.bQ,yI:()=>s.yI,uM:()=>m});var r=n("../../../../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=n("./app/constants/globalSelectionHeader.tsx"),i=n("./app/utils/performance/quickTrace/utils.tsx"),a=n("./app/components/events/interfaces/spans/spanBar.tsx"),s=n("./app/components/events/interfaces/spans/utils.tsx");function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n,i){var a,s=n.start,c=n.end,u=n.statsPeriod;return{pathname:"/organizations/".concat(e.slug,"/performance/trace/").concat(t,"/"),query:l(l({},i),{},(a={statsPeriod:u},(0,r.Z)(a,o.V.PAGE_START,s),(0,r.Z)(a,o.V.PAGE_END,c),a))}}function d(e){var t={projects:new Set,errors:new Set,transactions:new Set,startTimestamp:Number.MAX_SAFE_INTEGER,endTimestamp:0,maxGeneration:0};return e.reduce((function(e,t){return(0,i.S2)(t,(function(e,t){var n,r,o=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(null!==(n=t.errors)&&void 0!==n?n:[]);try{for(o.s();!(r=o.n()).done;){var i=r.value;e.errors.add(i.event_id)}}catch(e){o.e(e)}finally{o.f()}return e.transactions.add(t.event_id),e.projects.add(t.project_slug),e.startTimestamp=Math.min(e.startTimestamp,t.start_timestamp),e.endTimestamp=Math.max(e.endTimestamp,t.timestamp),e.maxGeneration=Math.max(e.maxGeneration,t.generation),e}),e)}),t)}function f(e){return Boolean(e.event_id)}function m(e){return null===e.parent_span_id}}}]);
//# sourceMappingURL=app_components_events_groupingInfo_index_tsx-app_components_quickTrace_index_tsx-app_utils_pe-8c2cc4.js.map