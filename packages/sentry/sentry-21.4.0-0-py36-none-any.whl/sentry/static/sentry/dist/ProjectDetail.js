(self.webpackChunk=self.webpackChunk||[]).push([["ProjectDetail"],{"./app/views/projectDetail/index.tsx":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>nr});var n=r("../../../../node_modules/react/index.js"),o=r("./app/components/acl/feature.tsx"),s=r("./app/components/alert.tsx"),i=r("./app/locale.tsx"),a=r("./app/styles/organization.tsx"),l=r("./app/utils/withOrganization.tsx"),c=r("../../../../node_modules/@babel/runtime/helpers/esm/extends.js"),u=r("../../../../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),p=r("../../../../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),d=r("../../../../node_modules/@babel/runtime/helpers/esm/createClass.js"),h=r("../../../../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),f=r("../../../../node_modules/@babel/runtime/helpers/esm/inherits.js"),g=r("../../../../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),m=r("../../../../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),v=r("../../../../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),y=r("../../../../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),Z=r("../../../../node_modules/@babel/runtime/regenerator/index.js"),b=r.n(Z),j=r("./app/actionCreators/globalSelection.tsx"),S=r("./app/components/breadcrumbs.tsx"),x=r("./app/components/button.tsx"),P=r("./app/components/buttonBar.tsx"),z=r("./app/components/createAlertButton.tsx"),O=r("./app/components/globalSdkUpdateAlert.tsx"),k=r("./app/components/idBadge/index.tsx"),w=r("./app/components/layouts/thirds.tsx"),R=r("./app/components/lightWeightNoProjectMessage.tsx"),T=r("./app/components/organizations/globalSelectionHeader/index.tsx"),C=r("./app/components/textOverflow.tsx"),D=r("./app/icons/index.tsx"),A=r("./app/utils.tsx"),I=r("./app/utils/routeTitle.tsx"),q=r("./app/utils/withGlobalSelection.tsx"),_=r("./app/utils/withProjects.tsx"),B=r("./app/views/asyncView.tsx"),E=r("./app/styles/space.tsx"),N=r("../../../../node_modules/@babel/runtime/helpers/esm/get.js"),L=r("../../../../node_modules/lodash/round.js"),F=r.n(L),M=r("./app/components/asyncComponent.tsx"),H=r("./app/components/count.tsx"),W=r("./app/components/organizations/globalSelectionHeader/getParams.tsx"),U=r("./app/components/organizations/timeRangeSelector/utils.tsx"),G=r("./app/components/panels/index.tsx"),V=r("./app/components/questionTooltip.tsx"),Q=r("./app/styles/overflowEllipsis.tsx"),Y=r("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");function J(e){var t=e.title,r=e.score,n=e.help,o=e.trend,s=e.trendStatus,i=e.className;return(0,Y.tZ)(K,{className:i},(0,Y.tZ)($,null,(0,Y.tZ)(ee,null,t),n&&(0,Y.tZ)(V.Z,{title:n,size:"sm",position:"top"})),(0,Y.tZ)(te,null,(0,Y.tZ)(re,null,null!=r?r:"—"),(0,A.ri)(o)&&(0,Y.tZ)(ne,{trendStatus:s},o)))}function X(e){switch(e.trendStatus){case"good":return e.theme.green300;case"bad":return e.theme.red300;default:return e.theme.gray300}}J.displayName="ScoreCard";var K=(0,y.Z)(G.s_,{target:"e1f488220",label:"StyledPanel"})("display:flex;flex-direction:column;justify-content:space-between;padding:",(0,E.Z)(2)," ",(0,E.Z)(3),";min-height:96px;"),$=(0,y.Z)("div",{target:"e1f488221",label:"HeaderTitle"})("display:inline-grid;grid-auto-flow:column;grid-gap:",(0,E.Z)(1),";align-items:center;width:fit-content;"),ee=(0,y.Z)("div",{target:"e1f488222",label:"Title"})(Q.Z,";"),te=(0,y.Z)("div",{target:"e1f488223",label:"ScoreWrapper"})({name:"x1sij0",styles:"display:flex;align-items:baseline;"}),re=(0,y.Z)("span",{target:"e1f488224",label:"Score"})({name:"1i9r7pg",styles:"font-size:32px;line-height:1;"}),ne=(0,y.Z)("span",{target:"e1f488225",label:"Trend"})("color:",X,";margin-left:",(0,E.Z)(1),";line-height:1;",Q.Z,";");const oe=J;var se=r("./app/utils/discover/fields.tsx"),ie=r("./app/utils/getPeriod.tsx"),ae=r("./app/views/performance/data.tsx"),le=r("./app/components/modals/featureTourModal.tsx"),ce=r("./app/utils/analytics.tsx"),ue=r("./app/views/performance/onboarding.tsx"),pe="https://docs.sentry.io/performance-monitoring/getting-started/";function de(e){var t=e.organization;return(0,Y.tZ)(o.Z,{hookName:"feature-disabled:project-performance-score-card",features:["performance-view"],organization:t},(0,Y.tZ)(he,{gap:1},(0,Y.tZ)(x.ZP,{size:"small",priority:"primary",external:!0,href:pe},(0,i.t)("Start Setup")),(0,Y.tZ)(le.ZP,{steps:ue.A,onAdvance:function(e,r){(0,ce.ec)({eventKey:"project_detail.performance_tour.advance",eventName:"Project Detail: Performance Tour Advance",organization_id:parseInt(t.id,10),step:e,duration:r})},onCloseModal:function(e,r){(0,ce.ec)({eventKey:"project_detail.performance_tour.close",eventName:"Project Detail: Performance Tour Close",organization_id:parseInt(t.id,10),step:e,duration:r})},doneText:(0,i.t)("Start Setup"),doneUrl:pe},(function(e){var t=e.showModal;return(0,Y.tZ)(x.ZP,{size:"small",onClick:t},(0,i.t)("Get a tour"))}))))}de.displayName="MissingPerformanceButtons";var he=(0,y.Z)(P.Z,{target:"enmztnv0",label:"StyledButtonBar"})({name:"l44j9w",styles:"grid-template-columns:minmax(auto,max-content) minmax(auto,max-content);"});const fe=de;var ge=r("./app/views/projectDetail/utils.tsx");function me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ve(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?me(Object(r),!0).forEach((function(t){(0,v.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):me(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const ye=function(e){(0,f.Z)(s,e);var t,r,o=(t=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,m.Z)(t);if(r){var o=(0,m.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,g.Z)(this,e)});function s(){var e;(0,p.Z)(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e=o.call.apply(o,[this].concat(r)),(0,v.Z)((0,h.Z)(e),"shouldRenderBadRequests",!0),e}return(0,d.Z)(s,[{key:"getDefaultState",value:function(){return ve(ve({},(0,N.Z)((0,m.Z)(s.prototype),"getDefaultState",this).call(this)),{},{currentApdex:null,previousApdex:null})}},{key:"getEndpoints",value:function(){var e=this.props,t=e.organization,r=e.selection,n=e.isProjectStabilized,o=e.hasTransactions;if(!this.hasFeature()||!n||!o)return[];var s=r.projects,i=r.environments,a=r.datetime,l=a.period,c={environment:i,project:s.map((function(e){return String(e)})),field:["apdex(".concat(t.apdexThreshold,")")],query:"event.type:transaction count():>0"},u=[["currentApdex","/organizations/".concat(t.slug,"/eventsv2/"),{query:ve(ve({},c),(0,W.Q)(a))}]];if((0,ge.D)(a)){var p=(0,U.s)((0,ie.X)({period:l,start:void 0,end:void 0},{shouldDoublePeriod:!0}).statsPeriod).start,d=(0,U.s)((0,ie.X)({period:l,start:void 0,end:void 0},{shouldDoublePeriod:!1}).statsPeriod).start;u.push(["previousApdex","/organizations/".concat(t.slug,"/eventsv2/"),{query:ve(ve({},c),{},{start:p,end:d})}])}return u}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.selection,n=t.isProjectStabilized,o=t.hasTransactions;e.selection===r&&e.hasTransactions===o||!n||this.remountComponent()}},{key:"hasFeature",value:function(){return this.props.organization.features.includes("performance-view")}},{key:"cardTitle",get:function(){return(0,i.t)("Apdex")}},{key:"cardHelp",get:function(){var e=(0,ae.$r)(this.props.organization,ae.V$.APDEX);return this.trend?e+(0,i.t)(" This shows how it has changed since the last period."):e}},{key:"currentApdex",get:function(){var e,t=this.props.organization,r=this.state.currentApdex,n=null==r||null===(e=r.data[0])||void 0===e?void 0:e[(0,se.LY)("apdex(".concat(t.apdexThreshold,")"))];return void 0===n?void 0:Number(n)}},{key:"previousApdex",get:function(){var e,t=this.props.organization,r=this.state.previousApdex,n=null==r||null===(e=r.data[0])||void 0===e?void 0:e[(0,se.LY)("apdex(".concat(t.apdexThreshold,")"))];return void 0===n?void 0:Number(n)}},{key:"trend",get:function(){return this.currentApdex&&this.previousApdex?F()(this.currentApdex-this.previousApdex,3):null}},{key:"trendStatus",get:function(){if(this.trend)return this.trend>0?"good":"bad"}},{key:"renderLoading",value:function(){return this.renderBody()}},{key:"renderMissingFeatureCard",value:function(){var e=this.props.organization;return(0,Y.tZ)(oe,{title:this.cardTitle,help:this.cardHelp,score:(0,Y.tZ)(fe,{organization:e})})}},{key:"renderScore",value:function(){return(0,A.ri)(this.currentApdex)?(0,Y.tZ)(H.Z,{value:this.currentApdex}):"—"}},{key:"renderTrend",value:function(){return(0,A.ri)(this.currentApdex)&&(0,A.ri)(this.trend)?(0,Y.tZ)(n.Fragment,null,this.trend>=0?(0,Y.tZ)(D.CC,{direction:"up",size:"xs"}):(0,Y.tZ)(D.CC,{direction:"down",size:"xs"}),(0,Y.tZ)(H.Z,{value:Math.abs(this.trend)})):null}},{key:"renderBody",value:function(){var e=this.props.hasTransactions;return this.hasFeature()&&!1!==e?(0,Y.tZ)(oe,{title:this.cardTitle,help:this.cardHelp,score:this.renderScore(),trend:this.renderTrend(),trendStatus:this.trendStatus}):this.renderMissingFeatureCard()}}]),s}(M.Z);var Ze=r("./app/components/charts/utils.tsx"),be=r("./app/constants/index.tsx"),je=r("./app/utils/formatters.tsx"),Se=r("./app/views/releases/utils/index.tsx"),xe=r("./app/views/releases/utils/sessionTerm.tsx"),Pe=r("./app/views/releases/list/releaseLanding.tsx"),ze="https://docs.sentry.io/product/releases/",Oe="https://docs.sentry.io/product/releases/health/";function ke(e){var t=e.organization,r=e.health,n=e.projectId;return(0,Y.tZ)(we,{gap:1},(0,Y.tZ)(x.ZP,{size:"small",priority:"primary",external:!0,href:r?Oe:ze},(0,i.t)("Start Setup")),!r&&(0,Y.tZ)(le.ZP,{steps:Pe.J,onAdvance:function(e,r){(0,ce.ec)({eventKey:"project_detail.releases_tour.advance",eventName:"Project Detail: Releases Tour Advance",organization_id:parseInt(t.id,10),project_id:n&&parseInt(n,10),step:e,duration:r})},onCloseModal:function(e,r){(0,ce.ec)({eventKey:"project_detail.releases_tour.close",eventName:"Project Detail: Releases Tour Close",organization_id:parseInt(t.id,10),project_id:n&&parseInt(n,10),step:e,duration:r})},doneText:(0,i.t)("Start Setup"),doneUrl:r?Oe:ze},(function(e){var t=e.showModal;return(0,Y.tZ)(x.ZP,{size:"small",onClick:t},(0,i.t)("Get a tour"))})))}ke.displayName="MissingReleasesButtons";var we=(0,y.Z)(P.Z,{target:"e4jdnlq0",label:"StyledButtonBar"})({name:"l44j9w",styles:"grid-template-columns:minmax(auto,max-content) minmax(auto,max-content);"});const Re=ke;function Te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(r),!0).forEach((function(t){(0,v.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Te(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const De=function(e){(0,f.Z)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,m.Z)(t);if(r){var o=(0,m.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,g.Z)(this,e)});function o(){var e;(0,p.Z)(this,o);for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return e=n.call.apply(n,[this].concat(r)),(0,v.Z)((0,h.Z)(e),"shouldRenderBadRequests",!0),e}return(0,d.Z)(o,[{key:"getDefaultState",value:function(){return Ce(Ce({},(0,N.Z)((0,m.Z)(o.prototype),"getDefaultState",this).call(this)),{},{currentSessions:null,previousSessions:null})}},{key:"getEndpoints",value:function(){var e=this.props,t=e.organization,r=e.selection,n=e.isProjectStabilized,o=e.hasSessions;if(!n||!o)return[];var s=r.projects,i=r.environments,a=r.datetime,l=a.period,c={environment:i,project:s[0],field:"sum(session)",groupBy:"session.status",interval:(0,Ze.Nm)(a)>=1440?"1d":"1h"},u=[["currentSessions","/organizations/".concat(t.slug,"/sessions/"),{query:Ce(Ce({},c),(0,W.Q)(a))}]];if((0,ge.D)(a)){var p=(0,ie.X)({period:l,start:void 0,end:void 0},{shouldDoublePeriod:!0}).statsPeriod;u.push(["previousSessions","/organizations/".concat(t.slug,"/sessions/"),{query:Ce(Ce({},c),{},{statsPeriodStart:p,statsPeriodEnd:null!=l?l:be.GY})}])}return u}},{key:"cardTitle",get:function(){return(0,i.t)("Crash Free Sessions")}},{key:"cardHelp",get:function(){return this.trend?(0,i.t)("The percentage of crash free sessions and how it has changed since the last period."):(0,xe.RE)(xe._k.STABILITY,null)}},{key:"score",get:function(){var e=this.state.currentSessions;return this.calculateCrashFree(e)}},{key:"trend",get:function(){var e=this.state.previousSessions,t=this.calculateCrashFree(e);if((0,A.ri)(this.score)&&(0,A.ri)(t))return F()(this.score-t,3)}},{key:"trendStatus",get:function(){if(this.trend)return this.trend>0?"good":"bad"}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.selection,n=t.isProjectStabilized,o=t.hasSessions;e.selection===r&&e.hasSessions===o||!n||this.remountComponent()}},{key:"calculateCrashFree",value:function(e){var t;if(e){var r=e.groups.reduce((function(e,t){return e+t.totals["sum(session)"]}),0),n=null===(t=e.groups.find((function(e){return"crashed"===e.by["session.status"]})))||void 0===t?void 0:t.totals["sum(session)"];if(0!==r&&(0,A.ri)(r)&&(0,A.ri)(n)){var o=(0,A.aQ)(n,r);return(0,Se.Mf)(100-o)}}}},{key:"renderLoading",value:function(){return this.renderBody()}},{key:"renderMissingFeatureCard",value:function(){var e=this.props.organization;return(0,Y.tZ)(oe,{title:this.cardTitle,help:this.cardHelp,score:(0,Y.tZ)(Re,{organization:e,health:!0})})}},{key:"renderScore",value:function(){return this.state.loading||!(0,A.ri)(this.score)?"—":(0,Se.zB)(this.score)}},{key:"renderTrend",value:function(){return!this.state.loading&&(0,A.ri)(this.score)&&(0,A.ri)(this.trend)?(0,Y.tZ)("div",null,this.trend>=0?(0,Y.tZ)(D.CC,{direction:"up",size:"xs"}):(0,Y.tZ)(D.CC,{direction:"down",size:"xs"}),"".concat((0,je.Du)(Math.abs(this.trend)),"%")):null}},{key:"renderBody",value:function(){return!1===this.props.hasSessions?this.renderMissingFeatureCard():(0,Y.tZ)(oe,{title:this.cardTitle,help:this.cardHelp,score:this.renderScore(),trend:this.renderTrend(),trendStatus:this.trendStatus})}}]),o}(M.Z);var Ae=r("../../../../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),Ie=r("./app/actionCreators/projects.tsx");function qe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _e(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(r),!0).forEach((function(t){(0,v.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Be=function(e){(0,f.Z)(a,e);var t,r,o,s=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,m.Z)(r);if(o){var n=(0,m.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,g.Z)(this,e)});function a(){var e;(0,p.Z)(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e=s.call.apply(s,[this].concat(r)),(0,v.Z)((0,h.Z)(e),"shouldRenderBadRequests",!0),e}return(0,d.Z)(a,[{key:"getDefaultState",value:function(){return _e(_e({},(0,N.Z)((0,m.Z)(a.prototype),"getDefaultState",this).call(this)),{},{currentReleases:null,previousReleases:null,noReleaseEver:!1})}},{key:"getEndpoints",value:function(){var e=this.props,t=e.organization,r=e.selection;if(!e.isProjectStabilized)return[];var n=r.projects,o=r.environments,s=r.datetime,i=s.period,a={environment:o,project:n[0]},l=[["currentReleases","/organizations/".concat(t.slug,"/releases/stats/"),{includeAllArgs:!0,method:"GET",query:_e(_e({},a),(0,W.Q)(s))}]];if((0,ge.D)(s)){var c=(0,U.s)((0,ie.X)({period:i,start:void 0,end:void 0},{shouldDoublePeriod:!0}).statsPeriod).start,u=(0,U.s)((0,ie.X)({period:i,start:void 0,end:void 0},{shouldDoublePeriod:!1}).statsPeriod).start;l.push(["previousReleases","/organizations/".concat(t.slug,"/releases/stats/"),{query:_e(_e({},a),{},{start:c,end:u})}])}return l}},{key:"onLoadAllEndpointsSuccess",value:(t=(0,u.Z)(b().mark((function e(){var t,r,n,o,s,i,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state,r=t.currentReleases,n=t.previousReleases,o=this.props,s=o.organization,i=o.selection,o.isProjectStabilized){e.next=4;break}return e.abrupt("return");case 4:if(0===[].concat((0,Ae.Z)(null!=r?r:[]),(0,Ae.Z)(null!=n?n:[])).length){e.next=7;break}return this.setState({noReleaseEver:!1}),e.abrupt("return");case 7:return this.setState({loading:!0}),e.next=10,(0,Ie.mf)(this.api,s.slug,i.projects[0]);case 10:a=e.sent,this.setState({noReleaseEver:!a,loading:!1});case 12:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"cardTitle",get:function(){return(0,i.t)("Number of Releases")}},{key:"cardHelp",get:function(){return this.trend?(0,i.t)("The number of releases for this project and how it has changed since the last period."):(0,i.t)("The number of releases for this project.")}},{key:"trend",get:function(){var e=this.state,t=e.currentReleases,r=e.previousReleases;return(0,A.ri)(t)&&(0,A.ri)(r)?t.length-r.length:null}},{key:"trendStatus",get:function(){if(this.trend)return this.trend>0?"good":"bad"}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.selection,n=t.isProjectStabilized;e.selection===r&&e.isProjectStabilized===n||this.remountComponent()}},{key:"renderLoading",value:function(){return this.renderBody()}},{key:"renderMissingFeatureCard",value:function(){var e=this.props.organization;return(0,Y.tZ)(oe,{title:this.cardTitle,help:this.cardHelp,score:(0,Y.tZ)(Re,{organization:e})})}},{key:"renderScore",value:function(){var e=this.state,t=e.currentReleases;return e.loading||!(0,A.ri)(t)?"—":1e3===t.length?"".concat(999,"+"):t.length}},{key:"renderTrend",value:function(){var e=this.state,t=e.loading,r=e.currentReleases;return t||!(0,A.ri)(this.trend)||1e3===(null==r?void 0:r.length)?null:(0,Y.tZ)(n.Fragment,null,this.trend>=0?(0,Y.tZ)(D.CC,{direction:"up",size:"xs"}):(0,Y.tZ)(D.CC,{direction:"down",size:"xs"}),Math.abs(this.trend))}},{key:"renderBody",value:function(){return this.state.noReleaseEver?this.renderMissingFeatureCard():(0,Y.tZ)(oe,{title:this.cardTitle,help:this.cardHelp,score:this.renderScore(),trend:this.renderTrend(),trendStatus:this.trendStatus})}}]),a}(M.Z);function Ee(e){var t=e.organization,r=e.selection,n=e.isProjectStabilized,o=e.hasSessions,s=e.hasTransactions;return(0,Y.tZ)(Ne,null,(0,Y.tZ)(De,{organization:t,selection:r,isProjectStabilized:n,hasSessions:o}),(0,Y.tZ)(Be,{organization:t,selection:r,isProjectStabilized:n}),(0,Y.tZ)(ye,{organization:t,selection:r,isProjectStabilized:n,hasTransactions:s}))}Ee.displayName="ProjectScoreCards";var Ne=(0,y.Z)("div",{target:"ejtb3ti0",label:"CardWrapper"})("display:grid;grid-template-columns:repeat(3,minmax(0,1fr));grid-column-gap:",(0,E.Z)(2),";@media (max-width:",(function(e){return e.theme.breakpoints[0]}),"){grid-template-columns:1fr;grid-template-rows:repeat(3,1fr);}");const Le=Ee;var Fe=r("./app/views/projectDetail/projectCharts.tsx"),Me=r("../../../../node_modules/lodash/pick.js"),He=r.n(Me),We=r("./app/components/charts/styles.tsx"),Ue=r("./app/components/issues/groupList.tsx"),Ge=r("./app/constants/globalSelectionHeader.tsx"),Ve=r("./app/utils/queryString.tsx"),Qe=r("./app/views/issueList/noGroupsHandler/index.tsx");function Ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Je(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(r),!0).forEach((function(t){(0,v.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ye(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Xe(e){var t=e.organization,r=e.location,o=e.projectId,s=e.api,a="/organizations/".concat(t.slug,"/issues/"),l="is:unresolved error.unhandled:true",c=Je(Je({limit:5},(0,W.Q)(He()(r.query,[].concat((0,Ae.Z)(Object.values(Ge.nF)),["cursor"])))),{},{query:l,sort:"freq"}),u={pathname:a,query:c};return(0,Y.tZ)(n.Fragment,null,(0,Y.tZ)(Ke,null,(0,Y.tZ)(We.OT,null,(0,i.t)("Frequent Unhandled Issues")),(0,Y.tZ)(x.ZP,{"data-test-id":"issues-open",size:"small",to:u,onClick:function(){(0,ce.ec)({eventKey:"project_detail.open_issues",eventName:"Project Detail: Open issues from project detail",organization_id:parseInt(t.id,10)})}},(0,i.t)("Open in Issues"))),(0,Y.tZ)($e,null,(0,Y.tZ)(Ue.Z,{orgId:t.slug,endpointPath:a,queryParams:c,query:"",canSelectGroups:!1,renderEmptyMessage:function(){var e=r.query.start?null:be.wh[(0,Ve.ro)(r.query.statsPeriod,be.GY)],n=e?e.toLowerCase():(0,i.t)("given timeframe");return(0,Y.tZ)(G.s_,null,(0,Y.tZ)(G.N,null,(0,Y.tZ)(Qe.Z,{api:s,organization:t,query:l,selectedProjectIds:[o],groupIds:[],emptyMessage:(0,i._N)("No unhandled issues for the [timePeriod].",{timePeriod:n})})))},withChart:!1,withPagination:!0})))}Xe.displayName="ProjectIssues";var Ke=(0,y.Z)("div",{target:"e2wsoa40",label:"ControlsWrapper"})("display:flex;align-items:center;justify-content:space-between;margin-bottom:",(0,E.Z)(1),";"),$e=(0,y.Z)("div",{target:"e2wsoa41",label:"TableWrapper"})("margin-bottom:",(0,E.Z)(4),";",G.s_,"{margin-bottom:-",(0,E.Z)(1),";}");const et=Xe;var tt=r("../../../../node_modules/emotion-theming/dist/emotion-theming.browser.esm.js"),rt=r("./app/components/emptyStateWarning.tsx"),nt=r("./app/components/links/link.tsx"),ot=r("./app/components/placeholder.tsx"),st=r("./app/components/timeSince.tsx"),it=r("./app/views/alerts/types.tsx");function at(e){var t=e.organization,r=e.projectSlug;return(0,Y.tZ)(lt,{gap:1},(0,Y.tZ)(z.Z,{organization:t,iconProps:{size:"xs"},size:"small",priority:"primary",referrer:"project_detail",projectSlug:r,hideIcon:!0},(0,i.t)("Create Alert")),(0,Y.tZ)(x.ZP,{size:"small",external:!0,href:"https://docs.sentry.io/product/alerts-notifications/metric-alerts/"},(0,i.t)("Learn More")))}at.displayName="MissingAlertsButtons";var lt=(0,y.Z)(P.Z,{target:"e1gvj5vo0",label:"StyledButtonBar"})({name:"l44j9w",styles:"grid-template-columns:minmax(auto,max-content) minmax(auto,max-content);"});const ct=at;var ut=r("./app/components/globalSelectionLink.tsx"),pt=(0,y.Z)("section",{target:"e2gf9iq0",label:"SidebarSection"})("margin-bottom:",(0,E.Z)(2),";",We.OT,"{line-height:1;}"),dt=(0,y.Z)("div",{target:"e2gf9iq1",label:"SectionHeadingWrapper"})({name:"69i1ev",styles:"display:flex;justify-content:space-between;align-items:center;"}),ht=(0,y.Z)(ut.Z,{target:"e2gf9iq2",label:"SectionHeadingLink"})({name:"k008qs",styles:"display:flex;"});function ft(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ft(Object(r),!0).forEach((function(t){(0,v.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ft(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var mt="172px",vt=function(e){(0,f.Z)(s,e);var t,r,n,o=(r=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,m.Z)(r);if(n){var o=(0,m.Z)(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return(0,g.Z)(this,e)});function s(){var e;(0,p.Z)(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e=o.call.apply(o,[this].concat(r)),(0,v.Z)((0,h.Z)(e),"renderAlertRow",(function(t){var r=e.props,n=r.organization,o=r.theme,s=t.status,a=t.id,l=t.identifier,c=t.title,u=t.dateClosed,p=t.dateStarted,d=s===it.vt.CLOSED,h=s===it.vt.WARNING,f=d?o.green300:h?o.yellow300:o.red300,g=d?D.DL:h?D.FC:D.zC;return(0,Y.tZ)(yt,{to:"/organizations/".concat(n.slug,"/alerts/").concat(l,"/"),key:a},(0,Y.tZ)(Zt,{color:f,icon:g},(0,Y.tZ)(bt,null,(0,Y.tZ)(g,{color:"white"}))),(0,Y.tZ)(jt,null,(0,Y.tZ)(St,null,c),(0,Y.tZ)(xt,{color:f},d?(0,i._N)("Resolved [date]",{date:u?(0,Y.tZ)(st.Z,{date:u}):null}):(0,i._N)("Triggered [date]",{date:(0,Y.tZ)(st.Z,{date:p})}))))})),e}return(0,d.Z)(s,[{key:"shouldComponentUpdate",value:function(e,t){var r=this.props,n=r.location,o=r.isProjectStabilized;return!(this.state===t&&!(0,ge.W)(n,e.location)&&o===e.isProjectStabilized)}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.location,n=t.isProjectStabilized;((0,ge.W)(e.location,r)||e.isProjectStabilized!==n)&&this.remountComponent()}},{key:"getEndpoints",value:function(){var e=this.props,t=e.location,r=e.organization;if(!e.isProjectStabilized)return[];var n=gt(gt({},He()(t.query,Object.values(Ge.nF))),{},{per_page:3});return[["unresolvedAlerts","/organizations/".concat(r.slug,"/incidents/"),{query:gt(gt({},n),{},{status:"open"})}],["resolvedAlerts","/organizations/".concat(r.slug,"/incidents/"),{query:gt(gt({},n),{},{status:"closed"})}]]}},{key:"onLoadAllEndpointsSuccess",value:(t=(0,u.Z)(b().mark((function e(){var t,r,n,o,s,i,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state,r=t.unresolvedAlerts,n=t.resolvedAlerts,o=this.props,s=o.location,i=o.organization,o.isProjectStabilized){e.next=4;break}return e.abrupt("return");case 4:if(0===[].concat((0,Ae.Z)(null!=r?r:[]),(0,Ae.Z)(null!=n?n:[])).length){e.next=7;break}return this.setState({hasAlertRule:!0}),e.abrupt("return");case 7:return this.setState({loading:!0}),e.next=10,this.api.requestPromise("/organizations/".concat(i.slug,"/alert-rules/"),{method:"GET",query:gt(gt({},He()(s.query,(0,Ae.Z)(Object.values(Ge.nF)))),{},{per_page:1})});case 10:a=e.sent,this.setState({hasAlertRule:a.length>0,loading:!1});case 12:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"alertsLink",get:function(){var e=this.props.organization;return{pathname:"/organizations/".concat(e.slug,"/alerts/"),query:{statsPeriod:void 0,start:void 0,end:void 0,utc:void 0}}}},{key:"renderInnerBody",value:function(){var e=this.props,t=e.organization,r=e.projectSlug,n=e.isProjectStabilized,o=this.state,s=o.loading,a=o.unresolvedAlerts,l=o.resolvedAlerts,c=o.hasAlertRule,u=[].concat((0,Ae.Z)(null!=a?a:[]),(0,Ae.Z)(null!=l?l:[])),p=0===u.length&&void 0===c;return s||p||!n?(0,Y.tZ)(ot.Z,{height:mt}):c?0===u.length?(0,Y.tZ)(Pt,{small:!0},(0,i.t)("No alerts found")):u.slice(0,3).map(this.renderAlertRow):(0,Y.tZ)(ct,{organization:t,projectSlug:r})}},{key:"renderLoading",value:function(){return this.renderBody()}},{key:"renderBody",value:function(){return(0,Y.tZ)(pt,null,(0,Y.tZ)(dt,null,(0,Y.tZ)(We.OT,null,(0,i.t)("Latest Alerts")),(0,Y.tZ)(ht,{to:this.alertsLink},(0,Y.tZ)(D.V$,null))),(0,Y.tZ)("div",null,this.renderInnerBody()))}}]),s}(M.Z),yt=(0,y.Z)(nt.Z,{target:"e1bsap10",label:"AlertRowLink"})("display:flex;align-items:center;height:40px;margin-bottom:",(0,E.Z)(3),";margin-left:",(0,E.Z)(.5),";&,&:hover,&:focus{color:inherit;}&:first-child{margin-top:",(0,E.Z)(1),";}"),Zt=(0,y.Z)("div",{target:"e1bsap11",label:"AlertBadge"})("display:flex;align-items:center;justify-content:center;flex-shrink:0;line-height:",(function(e){return e.icon===D.FC?void 0:1}),";&:before{content:'';width:30px;height:30px;border-radius:",(function(e){return e.theme.borderRadius}),";background-color:",(function(e){return e.color}),";transform:rotate(45deg);}"),bt=(0,y.Z)("div",{target:"e1bsap12",label:"AlertIconWrapper"})({name:"12efcmn",styles:"position:absolute;"}),jt=(0,y.Z)("div",{target:"e1bsap13",label:"AlertDetails"})("font-size:",(function(e){return e.theme.fontSizeMedium}),";margin-left:",(0,E.Z)(2),";",Q.Z),St=(0,y.Z)("div",{target:"e1bsap14",label:"AlertTitle"})({name:"k2hmek",styles:"font-weight:400;overflow:hidden;text-overflow:ellipsis;"}),xt=(0,y.Z)("span",{target:"e1bsap15",label:"AlertDate"})("color:",(function(e){return e.color}),";"),Pt=(0,y.Z)(rt.Z,{target:"e1bsap16",label:"StyledEmptyStateWarning"})("height:",mt,";justify-content:center;");const zt=(0,tt.Zz)(vt);var Ot=r("./app/components/dateTime.tsx"),kt=r("./app/components/version.tsx");function wt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Rt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wt(Object(r),!0).forEach((function(t){(0,v.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Tt="160px",Ct=function(e){(0,f.Z)(a,e);var t,r,o,s=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,m.Z)(r);if(o){var n=(0,m.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,g.Z)(this,e)});function a(){var e;(0,p.Z)(this,a);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return e=s.call.apply(s,[this].concat(r)),(0,v.Z)((0,h.Z)(e),"handleTourAdvance",(function(t){var r=e.props,n=r.organization,o=r.projectId;(0,ce.co)("releases.landing_card_clicked",{org_id:parseInt(n.id,10),project_id:o&&parseInt(o,10),step_id:t,step_title:Pe.J[t].title})})),(0,v.Z)((0,h.Z)(e),"renderReleaseRow",(function(t){var r=e.props.projectId,o=t.lastDeploy,s=t.dateCreated;return(0,Y.tZ)(n.Fragment,{key:t.version},(0,Y.tZ)(Ot.Z,{date:(null==o?void 0:o.dateFinished)||s,seconds:!1}),(0,Y.tZ)(C.Z,null,(0,Y.tZ)(At,{version:t.version,tooltipRawVersion:!0,projectId:r})))})),e}return(0,d.Z)(a,[{key:"shouldComponentUpdate",value:function(e,t){var r=this.props,n=r.location,o=r.isProjectStabilized;return!(this.state===t&&!(0,ge.W)(n,e.location)&&o===e.isProjectStabilized)}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.location,n=t.isProjectStabilized;((0,ge.W)(e.location,r)||e.isProjectStabilized!==n)&&this.remountComponent()}},{key:"getEndpoints",value:function(){var e=this.props,t=e.location,r=e.organization,n=e.projectSlug;if(!e.isProjectStabilized)return[];var o=Rt(Rt({},He()(t.query,Object.values(Ge.nF))),{},{per_page:5});return[["releases","/projects/".concat(r.slug,"/").concat(n,"/releases/"),{query:o}]]}},{key:"onLoadAllEndpointsSuccess",value:(t=(0,u.Z)(b().mark((function e(){var t,r,n,o,s;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state.releases,r=this.props,n=r.organization,o=r.projectId,r.isProjectStabilized){e.next=4;break}return e.abrupt("return");case 4:if(0===(null!=t?t:[]).length&&o){e.next=7;break}return this.setState({hasOlderReleases:!0}),e.abrupt("return");case 7:return this.setState({loading:!0}),e.next=10,(0,Ie.mf)(this.api,n.slug,o);case 10:s=e.sent,this.setState({hasOlderReleases:s,loading:!1});case 12:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"releasesLink",get:function(){var e=this.props.organization;return{pathname:"/organizations/".concat(e.slug,"/releases/"),query:{statsPeriod:void 0,start:void 0,end:void 0,utc:void 0}}}},{key:"renderInnerBody",value:function(){var e=this.props,t=e.organization,r=e.projectId,n=e.isProjectStabilized,o=this.state,s=o.loading,a=o.releases,l=o.hasOlderReleases,c=!(null!=a?a:[]).length&&void 0===l;return s||c||!n?(0,Y.tZ)(ot.Z,{height:Tt}):l?a&&0!==a.length?(0,Y.tZ)(Dt,null,a.map(this.renderReleaseRow)):(0,Y.tZ)(It,{small:!0},(0,i.t)("No releases found")):(0,Y.tZ)(Re,{organization:t,projectId:r})}},{key:"renderLoading",value:function(){return this.renderBody()}},{key:"renderBody",value:function(){return(0,Y.tZ)(pt,null,(0,Y.tZ)(dt,null,(0,Y.tZ)(We.OT,null,(0,i.t)("Latest Releases")),(0,Y.tZ)(ht,{to:this.releasesLink},(0,Y.tZ)(D.V$,null))),(0,Y.tZ)("div",null,this.renderInnerBody()))}}]),a}(M.Z),Dt=(0,y.Z)("div",{target:"e1yz6gpb0",label:"ReleasesTable"})("display:grid;font-size:",(function(e){return e.theme.fontSizeMedium}),";white-space:nowrap;grid-template-columns:1fr auto;margin-bottom:",(0,E.Z)(2),";& > *{padding:",(0,E.Z)(.5)," ",(0,E.Z)(1),";height:32px;}& > *:nth-child(2n + 2){text-align:right;}& > *:nth-child(4n + 1),& > *:nth-child(4n + 2){background-color:",(function(e){return e.theme.rowBackground}),";}"),At=(0,y.Z)(kt.Z,{target:"e1yz6gpb1",label:"StyledVersion"})(Q.Z," line-height:1.6;"),It=(0,y.Z)(rt.Z,{target:"e1yz6gpb2",label:"StyledEmptyStateWarning"})("height:",Tt,";justify-content:center;");const qt=Ct;var _t=r("./app/components/tooltip.tsx"),Bt=r("./app/utils/tokenizeSearch.tsx"),Et=r("./app/views/performance/landing.tsx"),Nt=r("./app/views/performance/trends/utils.tsx"),Lt=r("./app/views/performance/utils.tsx");function Ft(e){var t,r,n=e.organization,o=e.project,s=e.location,a=[{title:(0,i.t)("User Feedback"),to:{pathname:"/organizations/".concat(n.slug,"/user-feedback/"),query:{project:null==o?void 0:o.id}}},{title:(0,i.t)("Most Improved/Regressed Transactions"),to:(t=(0,Ve.ro)(s.query.query),r=(0,Bt.aI)(t||""),r.setTagValues("tpm()",[">0.01"]),r.setTagValues("transaction.duration",[">0","<".concat(Nt.bg)]),{pathname:(0,Lt.de)(n),query:{project:null==o?void 0:o.id,cursor:void 0,query:(0,Bt.gZ)(r),view:Et.FilterViews.TRENDS}}),disabled:!n.features.includes("performance-view")}];return(0,Y.tZ)(pt,null,(0,Y.tZ)(We.OT,null,(0,i.t)("Quick Links")),a.sort((function(e,t){return Number(!!e.disabled)-Number(!!t.disabled)})).map((function(e){var t=e.title,r=e.to,n=e.disabled;return(0,Y.tZ)("div",{key:t},(0,Y.tZ)(_t.Z,{title:(0,i.t)("You don't have access to this feature"),disabled:!n},(0,Y.tZ)(Mt,{to:r,disabled:n},(0,Y.tZ)(D.JH,null),(0,Y.tZ)(Ht,null,t))))})))}Ft.displayName="ProjectQuickLinks";var Mt=(0,y.Z)((function(e){return e.disabled?(0,Y.tZ)("span",{className:e.className},e.children):(0,Y.tZ)(ut.Z,e)}),{target:"eam62960",label:"QuickLink"})("margin-bottom:",(0,E.Z)(1),";display:grid;align-items:center;gap:",(0,E.Z)(1),";grid-template-columns:auto 1fr;",(function(e){return e.disabled&&"\n    color: ".concat(e.theme.gray200,";\n    cursor: not-allowed;\n  ")})),Ht=(0,y.Z)("span",{target:"eam62961",label:"QuickLinkText"})("font-size:",(function(e){return e.theme.fontSizeMedium}),";",Q.Z);const Wt=Ft;var Ut=r("./app/components/collapsible.tsx");function Gt(e){var t=e.organization,r=e.project,n=t.access.includes("project:write"),o="/settings/".concat(t.slug,"/projects/").concat(null==r?void 0:r.slug,"/teams/");return(0,Y.tZ)(Vt,null,(0,Y.tZ)(dt,null,(0,Y.tZ)(We.OT,null,(0,i.t)("Team Access")),(0,Y.tZ)(ht,{to:o},(0,Y.tZ)(D.V$,null))),(0,Y.tZ)("div",null,r?0===r.teams.length?(0,Y.tZ)(x.ZP,{to:o,disabled:!n,title:n?void 0:(0,i.t)("You do not have permission to do this"),priority:"primary",size:"small"},(0,i.t)("Assign Team")):(0,Y.tZ)(Ut.Z,{expandButton:function(e){var t=e.onExpand,r=e.numberOfCollapsedItems;return(0,Y.tZ)(x.ZP,{priority:"link",onClick:t},(0,i.tn)("Show %s collapsed team","Show %s collapsed teams",r))}},r.teams.sort((function(e,t){return e.slug.localeCompare(t.slug)})).map((function(e){return(0,Y.tZ)(Qt,{to:"/settings/".concat(t.slug,"/teams/").concat(e.slug,"/"),key:e.slug},(0,Y.tZ)(k.Z,{team:e,hideAvatar:!0}))}))):(0,Y.tZ)(ot.Z,{height:"23px"})))}Gt.displayName="ProjectTeamAccess";var Vt=(0,y.Z)(pt,{target:"e1r0e2mu0",label:"StyledSidebarSection"})("font-size:",(function(e){return e.theme.fontSizeMedium}),";"),Qt=(0,y.Z)(nt.Z,{target:"e1r0e2mu1",label:"StyledLink"})("display:block;margin-bottom:",(0,E.Z)(.5),";");const Yt=Gt;function Jt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Jt(Object(r),!0).forEach((function(t){(0,v.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Kt=function(e){(0,f.Z)(y,e);var t,r,l,c=(r=y,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,m.Z)(r);if(l){var n=(0,m.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,g.Z)(this,e)});function y(){var e;(0,p.Z)(this,y);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e=c.call.apply(c,[this].concat(r)),(0,v.Z)((0,h.Z)(e),"handleProjectChange",(function(t){var r=e.props,n=r.projects,o=r.router,s=r.location,i=r.organization,a=n.find((function(e){return e.id===String(t[0])}));null!=a&&a.id&&o.replace({pathname:"/organizations/".concat(i.slug,"/projects/").concat(a.slug,"/"),query:Xt(Xt({},s.query),{},{project:a.id,environment:void 0})})})),e}return(0,d.Z)(y,[{key:"getTitle",value:function(){var e=this.props.params;return(0,I.Z)((0,i.t)("Project %s",e.projectId),e.orgId,!1)}},{key:"componentDidMount",value:function(){this.syncProjectWithSlug(),this.props.location.query.project&&this.fetchSessionsExistence()}},{key:"componentDidUpdate",value:function(e){this.syncProjectWithSlug(),e.location.query.project!==this.props.location.query.project&&this.fetchSessionsExistence()}},{key:"project",get:function(){var e=this.props,t=e.projects,r=e.params;return t.find((function(e){return e.slug===r.projectId}))}},{key:"fetchSessionsExistence",value:(t=(0,u.Z)(b().mark((function e(){var t,r,n,o,s;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,r=t.organization,n=t.location,o=n.query.project){e.next=4;break}return e.abrupt("return");case 4:return this.setState({hasSessions:null}),e.next=7,this.api.requestPromise("/organizations/".concat(r.slug,"/sessions/"),{query:{project:o,field:"sum(session)",statsPeriod:"90d",interval:"1d"}});case 7:s=e.sent,this.setState({hasSessions:s.groups[0].totals["sum(session)"]>0});case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"syncProjectWithSlug",value:function(){var e,t=this.props,r=t.router,n=t.location,o=null===(e=this.project)||void 0===e?void 0:e.id;o&&o!==n.query.project&&(0,j.id)([Number(o)],r)}},{key:"isProjectStabilized",value:function(){var e,t=this.props,r=t.selection,n=t.location,o=null===(e=this.project)||void 0===e?void 0:e.id;return(0,A.ri)(o)&&o===n.query.project&&o===String(r.projects[0])}},{key:"renderLoading",value:function(){return this.renderBody()}},{key:"renderProjectNotFound",value:function(){return(0,Y.tZ)(a.JH,null,(0,Y.tZ)(s.Z,{type:"error",icon:(0,Y.tZ)(D.FC,null)},(0,i.t)("This project could not be found.")))}},{key:"renderBody",value:function(){var e=this.props,t=e.organization,r=e.params,s=e.location,a=e.router,l=e.loadingProjects,c=e.selection,u=this.project,p=this.state.hasSessions,d=t.features.includes("performance-view")&&(null==u?void 0:u.firstTransactionEvent),h=this.isProjectStabilized(),f=["chart1"];return(d||p)&&f.push("chart2"),l||u?(0,Y.tZ)(T.Z,{disableMultipleProjectSelection:!0,skipLoadLastUsed:!0,onUpdateProjects:this.handleProjectChange},(0,Y.tZ)(R.Z,{organization:t},(0,Y.tZ)($t,null,(0,Y.tZ)(w.h4,null,(0,Y.tZ)(w.oB,null,(0,Y.tZ)(S.Z,{crumbs:[{to:"/organizations/".concat(r.orgId,"/projects/"),label:(0,i.t)("Projects")},{label:(0,i.t)("Project Details")}]}),(0,Y.tZ)(w.Dx,null,(0,Y.tZ)(C.Z,null,u&&(0,Y.tZ)(k.Z,{project:u,avatarSize:28,displayName:r.projectId,disableLink:!0})))),(0,Y.tZ)(w.kP,null,(0,Y.tZ)(P.Z,{gap:1},(0,Y.tZ)(x.ZP,{to:null!=u&&u.id?"/organizations/".concat(r.orgId,"/issues/?project=").concat(u.id):"/".concat(r.orgId,"/").concat(r.projectId)},(0,i.t)("View All Issues")),(0,Y.tZ)(z.Z,{organization:t,projectSlug:r.projectId}),(0,Y.tZ)(x.ZP,{icon:(0,Y.tZ)(D.iC,null),label:(0,i.t)("Settings"),to:"/settings/".concat(r.orgId,"/projects/").concat(r.projectId,"/")})))),(0,Y.tZ)(w.uT,null,(0,Y.tZ)(er,null),(0,Y.tZ)(w.or,null,(0,Y.tZ)(Le,{organization:t,isProjectStabilized:h,selection:c,hasSessions:p,hasTransactions:d}),h&&(0,Y.tZ)(n.Fragment,null,f.map((function(e,r){return(0,Y.tZ)(Fe.Z,{location:s,organization:t,router:a,key:"project-charts-".concat(e),chartId:e,chartIndex:r,projectId:null==u?void 0:u.id,hasSessions:p,hasTransactions:!!d,visibleCharts:f})})),(0,Y.tZ)(et,{organization:t,location:s,projectId:c.projects[0],api:this.api}))),(0,Y.tZ)(w.MF,null,(0,Y.tZ)(Yt,{organization:t,project:u}),(0,Y.tZ)(o.Z,{features:["incidents"]},(0,Y.tZ)(zt,{organization:t,projectSlug:r.projectId,location:s,isProjectStabilized:h})),(0,Y.tZ)(qt,{organization:t,projectSlug:r.projectId,projectId:null==u?void 0:u.id,location:s,isProjectStabilized:h}),(0,Y.tZ)(Wt,{organization:t,project:u,location:s})))))):this.renderProjectNotFound()}}]),y}(B.Z),$t=(0,y.Z)(a.JH,{target:"e1fgo0qj0",label:"StyledPageContent"})({name:"y8aj3r",styles:"padding:0;"}),er=(0,y.Z)(O.Z,{target:"e1fgo0qj1",label:"StyledSdkUpdatesAlert"})("@media (min-width:",(function(e){return e.theme.breakpoints[1]}),"){margin-bottom:0;}");er.defaultProps={Wrapper:function(e){return(0,Y.tZ)(w.or,(0,c.Z)({fullWidth:!0},e))}};const tr=(0,_.Z)((0,q.Z)(Kt));function rr(e){return(0,Y.tZ)(o.Z,{features:["project-detail"],organization:e.organization,renderDisabled:function(){return(0,Y.tZ)(a.JH,null,(0,Y.tZ)(s.Z,{type:"warning"},(0,i.t)("You don't have access to this feature")))}},(0,Y.tZ)(tr,e))}rr.displayName="ProjectDetailContainer";const nr=(0,l.Z)(rr)}}]);
//# sourceMappingURL=ProjectDetail.js.map