(self.webpackChunk=self.webpackChunk||[]).push([[7289],{10596:function(e,t,a){"use strict";a.r(t),a(98010),a(61013),a(95163),a(48410),a(63238),a(61418),a(86248);var n=a(53218),r=a(47005),u=a(53913);function i(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,a,n,r,u,i){try{var l=e[u](i),o=l.value}catch(e){return void a(e)}l.done?t(o):Promise.resolve(o).then(n,r)}function o(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var u=e.apply(t,a);function i(e){l(u,n,r,i,o,"next",e)}function o(e){l(u,n,r,i,o,"throw",e)}i(void 0)}))}}var s=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a.ControllingUserId=e.getCurrentUserId(),a.ServerId=e.serverId(),(0,u.UE)("/mpv_shim_message",{name:t,payload:a})};function c(e){for(var t=e.length-1;t>0;t--){var a=Math.floor(Math.random()*(t+1)),n=[e[a],e[t]];e[t]=n[0],e[a]=n[1]}}function y(e,t,a){return d.apply(this,arguments)}function d(){return(d=o(regeneratorRuntime.mark((function e(t,a,r){var u,i,l,o,y,d=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=!(d.length>3&&void 0!==d[3])||d[3],i=a.ids||a.items.map((function(e){return e.Id})),!u){e.next=10;break}return e.next=5,n.O.getItemsForPlayback(a.serverId||t.serverId(),{Ids:i.join(",")});case 5:return l=e.sent,e.next=8,n.O.translateItemsForPlayback(l.Items,a);case 8:o=e.sent,i=o.map((function(e){return e.Id}));case 10:return"PlayShuffle"==r&&(r="PlayNow",c(i)),y={ItemIds:i,PlayCommand:r},a.startPositionTicks&&(y.StartPositionTicks=Number(a.startPositionTicks)),a.mediaSourceId&&(y.MediaSourceId=a.mediaSourceId),null!=a.audioStreamIndex&&(y.AudioStreamIndex=Number(a.audioStreamIndex)),null!=a.subtitleStreamIndex&&(y.SubtitleStreamIndex=Number(a.subtitleStreamIndex)),null!=a.startIndex&&(y.StartIndex=Number(a.startIndex)),e.next=19,s(t,"Play",y);case 19:return e.abrupt("return",e.sent);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a.Command=t,s(e,"Playstate",a)}function m(e){var t=e.currentServerId;return t?u.ZP.getApiClient(t):u.ZP.currentApiClient()}function f(e,t,a){var n={Name:t};return a&&(n.Arguments=a),s(m(e),"GeneralCommand",n)}var I=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name="mpv",this.type="mediaplayer",this.isLocalPlayer=!1,this.id="mpv"}var t,a,n;return t=e,(a=[{key:"beginPlayerUpdates",value:function(){var e=this,t=m(this);(0,u.lZ)((function(a){!function(e,t,a){var n=a.serverId();t.NowPlayingItem&&(t.NowPlayingItem.ServerId=n),function(e,t){if(e&&e.NowPlayingItem){var a=e.NowPlayingItem;a.ImageTags&&a.ImageTags.Primary||a.PrimaryImageTag&&(a.ImageTags=a.ImageTags||{},a.ImageTags.Primary=a.PrimaryImageTag),a.BackdropImageTag&&a.BackdropItemId===a.Id&&(a.BackdropImageTags=[a.BackdropImageTag]),a.BackdropImageTag&&a.BackdropItemId!==a.Id&&(a.ParentBackdropImageTags=[a.BackdropImageTag],a.ParentBackdropItemId=a.BackdropItemId),a.ServerId||(a.ServerId=t.serverId())}}(t,a);var u,i=(e.lastPlayerData,(u=[]).push("statechange"),u.push("timeupdate"),u.push("pause"),u);e.lastPlayerData=t;for(var l=0,o=i.length;l<o;l++)r.Events.trigger(e,i[l],[t])}(e,a,t)}))}},{key:"endPlayerUpdates",value:function(){this.isUpdating=!0,(0,u.lZ)((function(){}))}},{key:"getPlayerState",value:function(){return this.lastPlayerData||{}}},{key:"sendCommand",value:function(e){f(this,e)}},{key:"play",value:(n=o(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object.assign({},t),a=m(this),t.items&&(t.ids=t.items.map((function(e){return e.Id})),t.items=null),e.next=5,y(a,t,"PlayNow");case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"shuffle",value:function(e){y(m(this),{ids:[e.Id]},"PlayShuffle")}},{key:"instantMix",value:function(e){y(m(this),{ids:[e.Id]},"PlayInstantMix")}},{key:"queue",value:function(e){y(m(this),e,"PlayNext",!1)}},{key:"queueNext",value:function(e){y(m(this),e,"PlayLast",!1)}},{key:"canPlayMediaType",value:function(e){return"video"===(e=(e||"").toLowerCase())||"audio"===e}},{key:"canQueueMediaType",value:function(e){return this.canPlayMediaType(e)}},{key:"stop",value:function(){v(m(this),"Stop")}},{key:"nextTrack",value:function(){v(m(this),"NextTrack")}},{key:"previousTrack",value:function(){v(m(this),"PreviousTrack")}},{key:"seek",value:function(e){v(m(this),"Seek",{SeekPositionTicks:e})}},{key:"currentTime",value:function(e){if(null!=e)return this.seek(1e4*e);var t=this.lastPlayerData||{};return(t=t.PlayState||{}).PositionTicks/1e4}},{key:"duration",value:function(){var e=this.lastPlayerData||{};return(e=e.NowPlayingItem||{}).RunTimeTicks}},{key:"paused",value:function(){var e=this.lastPlayerData||{};return(e=e.PlayState||{}).IsPaused}},{key:"getVolume",value:function(){var e=this.lastPlayerData||{};return(e=e.PlayState||{}).VolumeLevel}},{key:"isMuted",value:function(){var e=this.lastPlayerData||{};return(e=e.PlayState||{}).IsMuted}},{key:"pause",value:function(){v(m(this),"Pause")}},{key:"unpause",value:function(){v(m(this),"Unpause")}},{key:"playPause",value:function(){v(m(this),"PlayPause")}},{key:"setMute",value:function(e){f(this,e?"Mute":"Unmute")}},{key:"toggleMute",value:function(){f(this,"ToggleMute")}},{key:"setVolume",value:function(e){f(this,"SetVolume",{Volume:e})}},{key:"volumeUp",value:function(){f(this,"VolumeUp")}},{key:"volumeDown",value:function(){f(this,"VolumeDown")}},{key:"toggleFullscreen",value:function(){f(this,"ToggleFullscreen")}},{key:"audioTracks",value:function(){var e=this.lastPlayerData||{};return((e=e.NowPlayingItem||{}).MediaStreams||[]).filter((function(e){return"Audio"===e.Type}))}},{key:"getAudioStreamIndex",value:function(){var e=this.lastPlayerData||{};return(e=e.PlayState||{}).AudioStreamIndex}},{key:"playTrailers",value:function(e){f(this,"PlayTrailers",{ItemId:e.Id})}},{key:"setAudioStreamIndex",value:function(e){f(this,"SetAudioStreamIndex",{Index:e})}},{key:"subtitleTracks",value:function(){var e=this.lastPlayerData||{};return((e=e.NowPlayingItem||{}).MediaStreams||[]).filter((function(e){return"Subtitle"===e.Type}))}},{key:"getSubtitleStreamIndex",value:function(){var e=this.lastPlayerData||{};return(e=e.PlayState||{}).SubtitleStreamIndex}},{key:"setSubtitleStreamIndex",value:function(e){f(this,"SetSubtitleStreamIndex",{Index:e})}},{key:"setRepeatMode",value:function(e){f(this,"SetRepeatMode",{RepeatMode:e})}},{key:"getRepeatMode",value:function(){}},{key:"setQueueShuffleMode",value:function(e){f(this,"SetShuffleQueue",{ShuffleMode:e})}},{key:"getQueueShuffleMode",value:function(){}},{key:"displayContent",value:function(e){f(this,"DisplayContent",e)}},{key:"isPlaying",value:function(e){var t=this.lastPlayerData||{};return null!=t.NowPlayingItem&&(t.NowPlayingItem.MediaType===e||!e)}},{key:"isPlayingVideo",value:function(){var e=this.lastPlayerData||{};return"Video"===(e=e.NowPlayingItem||{}).MediaType}},{key:"isPlayingAudio",value:function(){var e=this.lastPlayerData||{};return"Audio"===(e=e.NowPlayingItem||{}).MediaType}},{key:"getPlaylist",value:function(){return Promise.resolve([])}},{key:"getCurrentPlaylistItemId",value:function(){}},{key:"setCurrentPlaylistItem",value:function(e){return Promise.resolve()}},{key:"removeFromPlaylist",value:function(e){return Promise.resolve()}},{key:"tryPair",value:function(e){return Promise.resolve()}},{key:"getTargets",value:function(){return[(0,u.DN)()]}}])&&i(t.prototype,a),e}();t.default=I}}]);